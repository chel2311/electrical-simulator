<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>電気回路シミュレーター - 初級研修</title>
  <link rel="stylesheet" href="css/circuit-simulator.css">
</head>
<body>
  <header class="header">
    <h1>電気回路シミュレーター</h1>
  </header>
  
  <nav class="main-nav">
    <ul class="nav-list">
      <li class="nav-item active" data-section="basic">基本知識</li>
      <li class="nav-item" data-section="switch">スイッチ回路</li>
      <li class="nav-item" data-section="outlet">コンセント回路</li>
      <li class="nav-item" data-section="trouble">トラブルシューティング</li>
      <li class="nav-item" data-section="safety">安全情報</li>
      <li class="nav-item" data-section="quiz">理解度チェック</li>
    </ul>
  </nav>
  
  <main class="container">
    <!-- 基本知識セクション -->
    <div id="basicSection" class="section-container active">
      <div class="panel">
        <div class="panel-title">電気設備の基本シンボル</div>
        <table class="symbol-table">
          <thead>
            <tr>
              <th>シンボル</th>
              <th>名称</th>
              <th>説明</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
				<svg width="88.89" height="88.89" viewBox="0 0 66.67 66.67" xmlns="http://www.w3.org/2000/svg">
				  <style>
				    .shape {
				      fill: none;
				      stroke: black;
				      stroke-width: 5;
				      stroke-linecap: round;
				    }
				  </style>

				  <circle cx="33.33" cy="33.33" r="30" class="shape" />

				  <path d="M 21.53,21.53 A 16.67 16.67 0 0 0 21.53,45.13" class="shape" />

				  <path d="M 45.13,45.13 A 16.67 16.67 0 0 0 45.13,21.53" class="shape" />

				</svg>
              </td>
              <td>引っ掛けシーリング</td>
              <td>天井に簡易型で取り付ける照明器具を表します。</td>
            </tr>
            <tr>
              <td>
				<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
				  <circle cx="50" cy="50" r="26.67" fill="black" />
				</svg>
              </td>
              <td>片切スイッチ</td>
              <td>電気の流れをON/OFFするための基本的なスイッチを表します。</td>
            </tr>
            <tr>
              <td>
				<svg width="120" height="100" xmlns="http://www.w3.org/2000/svg">
				  <circle cx="50" cy="50" r="26.67" fill="black" />
				  <text x="95" y="70" font-size="50" text-anchor="middle" fill="black">3</text>
				</svg>
              </td>
              <td>3路スイッチ</td>
              <td>2箇所から照明を操作するための切り替えスイッチです。</td>
            </tr>
            <tr>
              <td>
				<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
				  <circle cx="50" cy="50" r="40" stroke="black" stroke-width="3" fill="none" />
				  <rect x="33" y="12" width="7" height="75" fill="black" />
				  <rect x="60" y="12" width="7" height="75" fill="black" />
				  <path d="M 10 59 A 40 30 0 0 0 90 59 H 10 Z" fill="black" />
				</svg>
              </td>
              <td>コンセント</td>
              <td>電源を取るためのコンセントを表します。</td>
            </tr>
          </tbody>
        </table>
        
        <div class="panel-title">電気配線の基本</div>
        <p>電気配線には主に次の種類があります：</p>
        <ul>
          <li><strong>白線（W）</strong>：接地側（0V）、中性線とも呼ばれます</li>
          <li><strong>黒線（B）</strong>：非接地側（100V）</li>
          <li><strong>赤線（R）</strong>：スイッチ間を接続するトラベラー線などに使用されます</li>
          <li><strong>緑線</strong>：安全のための接地（アース）線</li>
        </ul>
        
        <div class="safety-notice">
          <div class="safety-title"><span class="safety-icon">⚠️</span> 安全注意事項</div>
          <p>電気工事は有資格者が行うべきです。無資格での電気工事は法律で禁止されており、感電や火災の危険があります。</p>
        </div>
      </div>
      
      <div class="panel">
        <div class="panel-title">電気回路の種類</div>
        <p>住宅用電気設備では、主に以下の回路が使用されています：</p>
        <ul>
          <li><strong>照明回路</strong>：照明器具を制御するための回路</li>
          <li><strong>コンセント回路</strong>：電気製品に電源を供給するための回路</li>
          <li><strong>専用回路</strong>：エアコンや電子レンジなど大電力を消費する機器のための専用回路</li>
          <li><strong>漏電遮断器回路</strong>：感電や火災の危険を防ぐための安全回路</li>
        </ul>
        <p>本シミュレーターでは、照明回路（各種スイッチ回路）とコンセント回路の動作を学ぶことができます。</p>
      </div>
    </div>
    
    <!-- スイッチ回路セクション -->
    <div id="switchSection" class="section-container">
      <div class="circuit-container">
        <section class="circuit" id="single-switch">
          <div class="circuit-title">
            <h2>1. 片切スイッチ回路</h2>
            <div class="circuit-status" id="singleSwitchStatus">OFF</div>
          </div>
          <div class="circuit-content">
            <svg class="circuit-svg" viewBox="0 0 800 200" xmlns="http://www.w3.org/2000/svg">
              <!-- Power source -->
              <text x="30" y="50" class="label">0V[接地]</text>
              <text x="1" y="150" class="label">100V[非接地]</text>
              
              <!-- White wire (neutral) - changed to gray color -->
              <path d="M 100 50 L 400 50 L 400 100" stroke="#AAAAAA" stroke-width="3" fill="none" class="w-wire"/>
              
              <!-- Black wire (hot) -->
              <path d="M 100 150 L 200 150" stroke="#333" stroke-width="3" fill="none" class="b-wire"/>
              <path d="M 300 150 L 400 150 L 400 120" stroke="#333" stroke-width="3" fill="none" class="b-wire" id="singleSwitchPath"/>
              
              <!-- Switch -->
              <g class="switch" id="singleSwitch">
                <rect x="200" y="130" width="100" height="40" fill="white" stroke="#333" stroke-width="2" rx="5"/>
                <line x1="200" y1="150" x2="220" y2="150" stroke="#333" stroke-width="3"/>
                <line x1="280" y1="150" x2="300" y2="150" stroke="#333" stroke-width="3"/>
                <line x1="220" y1="150" x2="280" y2="130" stroke="#333" stroke-width="3" id="singleSwitchLine"/>
                <circle cx="220" cy="150" r="4" fill="#333"/>
                <circle cx="280" cy="150" r="4" fill="#333"/>
                <text x="250" y="120" text-anchor="middle" font-size="12">片切スイッチ</text>
              </g>
              
              <!-- Labels with background for better visibility -->
              <rect x="100" y="25" width="70" height="18" fill="white" opacity="0.8" rx="3"></rect>
              <text x="85" y="40" class="label">白線 (W)</text>
              <rect x="60" y="175" width="70" height="18" fill="white" opacity="0.8" rx="3"></rect>
              <text x="85" y="170" class="label">黒線 (B)</text>
              
              <!-- Current Flow Animation Path (initially hidden) - 黒線から白線への流れに修正 -->
              <path d="M 100 150 L 220 150 L 280 150 L 300 150 L 400 150 L 400 100 L 400 50 L 100 50" 
                    stroke="#FF961C" stroke-width="4" fill="none" opacity="0" id="singleSwitchCurrent" class="current-path"/>
              
              <!-- Lamp with simplified style - moved below current path -->
              <circle cx="400" cy="110" r="20" fill="white" stroke="#333" stroke-width="2" id="singleSwitchLamp"/>
              <text x="400" y="115" text-anchor="middle" font-size="11">照明</text>
            </svg>
          </div>
          <div class="measurement-display">
            <div class="meter">
              <span class="meter-label">電圧:</span>
              <span class="meter-value" id="singleSwitchVoltage">0 V</span>
            </div>
            <div class="meter">
              <span class="meter-label">電流:</span>
              <span class="meter-value" id="singleSwitchCurrent">0.0 A</span>
            </div>
            <div class="meter">
              <span class="meter-label">消費電力:</span>
              <span class="meter-value" id="singleSwitchPower">0 W</span>
            </div>
          </div>
          <div class="circuit-description">
            片切スイッチは1箇所から照明のON/OFFを切り替える基本的な回路です。黒線（B）側にスイッチを設置します。スイッチをクリックすると状態が切り替わります。電流は黒線（100V）から白線（0V）へ流れます。
            <button class="help-tip" data-tip="片切スイッチは最も一般的なスイッチです。廊下や洗面所など１箇所からの操作で十分な場所に使用されます。">?</button>
          </div>
          <div class="troubleshooting-panel" style="display: none;">
            <div class="problem-desc">問題: 照明が点灯しません。考えられる原因を特定してください。</div>
            <button class="hint-btn">ヒントを表示</button>
            <button class="solution-btn">解決策を表示</button>
            <div class="hint" style="display: none; margin-top: 10px; color: #0078e7;">
              ヒント: スイッチの接点が正しく接続されているか、電球が切れていないかを確認しましょう。
            </div>
            <div class="solution" style="display: none; margin-top: 10px; color: #28a745;">
              解決策: 1. スイッチの接点を確認し、必要に応じて交換する 2. 電球が切れていれば交換する 3. 配線の接続を確認する
            </div>
          </div>
        </section>
        
        <section class="circuit" id="three-way-switch">
          <div class="circuit-title">
            <h2>2. 3路スイッチ回路</h2>
            <div class="circuit-status" id="threeWaySwitchStatus">OFF</div>
          </div>
          <div class="circuit-content">
            <svg class="circuit-svg" viewBox="0 0 900 200" xmlns="http://www.w3.org/2000/svg">
              <!-- Power source -->
              <text x="20" y="50" class="label">0V[接地]</text>
              <text x="1" y="150" class="label">100V[非接地]</text>
              
              <!-- White wire (neutral) - changed to gray color -->
              <path d="M 80 50 L 650 50 L 650 100" stroke="#AAAAAA" stroke-width="3" fill="none" class="w-wire"/>
              
              <!-- Black wire (hot) -->
              <path d="M 80 150 L 150 150" stroke="#333" stroke-width="3" fill="none" class="b-wire"/>
              
              <!-- 3-way switch 1 -->
              <g class="switch" id="threeWaySwitch1">
                <rect x="150" y="130" width="70" height="60" fill="white" stroke="#333" stroke-width="2" rx="5"/>
                <line x1="150" y1="150" x2="170" y2="150" stroke="#333" stroke-width="3"/>
                <circle cx="170" cy="150" r="4" fill="#333"/>
                <circle cx="200" cy="140" r="4" fill="#333"/>
                <circle cx="200" cy="160" r="4" fill="#333"/>
                <line x1="170" y1="150" x2="200" y2="140" stroke="#333" stroke-width="3" id="threeWaySwitch1Line"/>
                <text x="185" y="120" text-anchor="middle" font-size="12">3路スイッチ1</text>
              </g>
              
              <!-- Traveler wires -->
              <path d="M 200 140 L 390 140" stroke="#FF0000" stroke-width="3" fill="none" class="r-wire"/>
              <path d="M 200 160 L 390 160" stroke="#FF0000" stroke-width="3" fill="none" class="r-wire"/>
              
              <!-- 3-way switch 2 -->
              <g class="switch" id="threeWaySwitch2">
                <rect x="390" y="130" width="70" height="60" fill="white" stroke="#333" stroke-width="2" rx="5"/>
                <circle cx="390" cy="140" r="4" fill="#333"/>
                <circle cx="390" cy="160" r="4" fill="#333"/>
                <circle cx="440" cy="150" r="4" fill="#333"/>
                <line x1="390" y1="140" x2="440" y2="150" stroke="#333" stroke-width="3" id="threeWaySwitch2Line"/>
                <line x1="440" y1="150" x2="460" y2="150" stroke="#333" stroke-width="3"/>
                <text x="425" y="120" text-anchor="middle" font-size="12">3路スイッチ2</text>
              </g>
              
              <!-- Output to lamp -->
              <path d="M 460 150 L 650 150 L 650 120" stroke="#333" stroke-width="3" fill="none" class="b-wire"/>
              
              <!-- Labels with background for better visibility -->
              <rect x="100" y="25" width="70" height="18" fill="white" opacity="0.8" rx="3"></rect>
              <text x="85" y="40" class="label">白線 (W)</text>
              <rect x="60" y="175" width="70" height="18" fill="white" opacity="0.8" rx="3"></rect>
              <text x="85" y="170" class="label">黒線 (B)</text>
              <rect x="285" y="117" width="70" height="18" fill="white" opacity="0.8" rx="3"></rect>
              <text x="295" y="130" class="label">赤線 (R)</text>
              <rect x="285" y="167" width="70" height="18" fill="white" opacity="0.8" rx="3"></rect>
              <text x="295" y="180" class="label">赤線 (R)</text>
              
              <!-- Current Flow Animation Path (initially hidden) - 黒線から白線への流れに修正 -->
              <path d="" stroke="#FF961C" stroke-width="4" fill="none" opacity="0" id="threeWaySwitchCurrent" class="current-path"/>
              
              <!-- Lamp with simplified style - moved below current path -->
              <circle cx="650" cy="110" r="20" fill="white" stroke="#333" stroke-width="2" id="threeWaySwitchLamp"/>
              <text x="650" y="115" text-anchor="middle" font-size="12">照明</text>
            </svg>
          </div>
          <div class="measurement-display">
            <div class="meter">
              <span class="meter-label">電圧:</span>
              <span class="meter-value" id="threeWaySwitchVoltage">0 V</span>
            </div>
            <div class="meter">
              <span class="meter-label">電流:</span>
              <span class="meter-value" id="threeWaySwitchCurrentValue">0.0 A</span>
            </div>
            <div class="meter">
              <span class="meter-label">消費電力:</span>
              <span class="meter-value" id="threeWaySwitchPower">0 W</span>
            </div>
          </div>
          <div class="circuit-description">
            3路スイッチ回路は2箇所から照明のON/OFFを切り替えることができます。赤線（R）のトラベラー線が特徴的です。どちらか一方のスイッチを切り替えると状態が反転します。電流は黒線（100V）から白線（0V）へ流れます。
            <button class="help-tip" data-tip="3路スイッチは階段の上下や廊下の両端など、2箇所から照明を操作したい場合に使用します。">?</button>
          </div>
        </section>
        
        <section class="circuit" id="four-way-switch">
          <div class="circuit-title">
            <h2>3. 3路+4路スイッチ回路</h2>
            <div class="circuit-status" id="fourWaySwitchStatus">OFF</div>
          </div>
          <div class="circuit-content">
            <svg class="circuit-svg" viewBox="0 0 800 220" xmlns="http://www.w3.org/2000/svg">
              <!-- Power source -->
              <text x="20" y="50" class="label">0V[接地]</text>
              <text x="-5" y="170" class="label">100V[非接地]</text>
              
              <!-- White wire (neutral) - changed from blue to gray -->
              <path d="M 70 50 L 730 50 L 730 100" stroke="#AAAAAA" stroke-width="3" fill="none" class="w-wire"/>
              
              <!-- Black wire (hot) -->
              <path d="M 70 170 L 120 170" stroke="#333" stroke-width="3" fill="none" class="b-wire"/>
              
              <!-- 3-way switch 1 -->
              <g class="switch" id="fourWaySwitch1">
                <rect x="120" y="150" width="60" height="60" fill="white" stroke="#333" stroke-width="2" rx="5"/>
                <line x1="120" y1="170" x2="135" y2="170" stroke="#333" stroke-width="3"/>
                <circle cx="135" cy="170" r="4" fill="#333"/>
                <circle cx="165" cy="160" r="4" fill="#333"/>
                <circle cx="165" cy="180" r="4" fill="#333"/>
                <line x1="135" y1="170" x2="165" y2="160" stroke="#333" stroke-width="3" id="fourWaySwitch1Line"/>
                <text x="150" y="130" text-anchor="middle" font-size="12">3路スイッチ1</text>
              </g>
              
              <!-- Traveler wires to 4-way -->
              <path d="M 165 160 L 250 160" stroke="#FF0000" stroke-width="3" fill="none" class="r-wire"/>
              <path d="M 165 180 L 250 180" stroke="#FF0000" stroke-width="3" fill="none" class="r-wire"/>
              
              <!-- 4-way switch -->
              <g class="switch" id="fourWayMiddleSwitch">
                <rect x="250" y="140" width="100" height="80" fill="white" stroke="#333" stroke-width="2" rx="5"/>
                <circle cx="250" cy="160" r="4" fill="#333"/>
                <circle cx="250" cy="180" r="4" fill="#333"/>
                <circle cx="350" cy="160" r="4" fill="#333"/>
                <circle cx="350" cy="180" r="4" fill="#333"/>
                
                <!-- Default crossed wires -->
                <line x1="250" y1="160" x2="350" y2="180" stroke="#333" stroke-width="3" id="fourWayMiddleSwitch1"/>
                <line x1="250" y1="180" x2="350" y2="160" stroke="#333" stroke-width="3" id="fourWayMiddleSwitch2"/>
                <text x="300" y="130" text-anchor="middle" font-size="12">4路スイッチ</text>
              </g>
              
              <!-- Traveler wires to 3-way -->
              <path d="M 350 160 L 435 160" stroke="#FF0000" stroke-width="3" fill="none" class="r-wire"/>
              <path d="M 350 180 L 435 180" stroke="#FF0000" stroke-width="3" fill="none" class="r-wire"/>
              
              <!-- 3-way switch 2 -->
              <g class="switch" id="fourWaySwitch2">
                <rect x="435" y="150" width="60" height="60" fill="white" stroke="#333" stroke-width="2" rx="5"/>
                <circle cx="435" cy="160" r="4" fill="#333"/>
                <circle cx="435" cy="180" r="4" fill="#333"/>
                <circle cx="475" cy="170" r="4" fill="#333"/>
                <line x1="435" y1="160" x2="475" y2="170" stroke="#333" stroke-width="3" id="fourWaySwitch2Line"/>
                <line x1="475" y1="170" x2="495" y2="170" stroke="#333" stroke-width="3"/>
                <text x="465" y="130" text-anchor="middle" font-size="12">3路スイッチ2</text>
              </g>
              
              <!-- Output to lamp -->
              <path d="M 495 170 L 730 170 L 730 120" stroke="#333" stroke-width="3" fill="none" class="b-wire"/>
              
              <!-- Labels with background for better visibility -->
              <text x="70" y="40" class="label">白線 (W)</text>
              <text x="70" y="190" class="label">黒線 (B)</text>
              <rect x="200" y="137" width="70" height="18" fill="white" opacity="0.8" rx="3"></rect>
              <text x="210" y="150" class="label">赤線 (R)</text>
              <rect x="200" y="187" width="70" height="18" fill="white" opacity="0.8" rx="3"></rect>
              <text x="210" y="200" class="label">赤線 (R)</text>
              <rect x="380" y="137" width="70" height="18" fill="white" opacity="0.8" rx="3"></rect>
              <text x="390" y="150" class="label">赤線 (R)</text>
              <rect x="380" y="187" width="70" height="18" fill="white" opacity="0.8" rx="3"></rect>
              <text x="390" y="200" class="label">赤線 (R)</text>
              
              <!-- Current Flow Animation Path (initially hidden) - 黒線から白線への流れに修正 -->
              <path d="" stroke="#FF961C" stroke-width="4" fill="none" opacity="0" id="fourWaySwitchCurrent" class="current-path"/>
              
              <!-- Lamp - moved below current path -->
              <circle cx="730" cy="110" r="20" fill="#f0f0f0" stroke="#333" stroke-width="2" id="fourWaySwitchLamp"/>
              <text x="730" y="115" text-anchor="middle" font-size="11">照明</text>
            </svg>
          </div>
          <div class="measurement-display">
            <div class="meter">
              <span class="meter-label">電圧:</span>
              <span class="meter-value" id="fourWaySwitchVoltage">0 V</span>
            </div>
            <div class="meter">
              <span class="meter-label">電流:</span>
              <span class="meter-value" id="fourWaySwitchCurrentValue">0.0 A</span>
            </div>
            <div class="meter">
              <span class="meter-label">消費電力:</span>
              <span class="meter-value" id="fourWaySwitchPower">0 W</span>
            </div>
          </div>
          <div class="circuit-description" style="margin-top: 40px; margin-bottom: 20px;">
            3路+4路スイッチ回路は3箇所から照明のON/OFFを切り替えることができます。いずれか1つのスイッチを切り替えるたびに状態が反転します。電流は黒線（100V）から白線（0V）へ流れます。
            <button class="help-tip" data-tip="4路スイッチは3路スイッチと組み合わせて使用し、3か所以上から照明を操作できるようにします。廊下と階段の組み合わせなど、複数箇所での操作が必要な場合に使用します。">?</button>
          </div>
        </section>
        
        <section class="legend">
          <h2>凡例</h2>
          <div class="legend-items">
            <div class="legend-item">
              <div class="legend-color w-color"></div>
              <div class="legend-text">白線 (W) - 接地側 0V</div>
            </div>
            <div class="legend-item">
              <div class="legend-color b-color"></div>
              <div class="legend-text">黒線 (B) - 非接地側 100V</div>
            </div>
            <div class="legend-item">
              <div class="legend-color r-color"></div>
              <div class="legend-text">赤線 (R) - 渡り線（トラベラー）</div>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background-color: #FF961C;"></div>
              <div class="legend-text">電流の流れ（黒→白）</div>
            </div>
            <div class="legend-item">
              <div style="width: 20px; height: 20px; background-color: #FFD700; border-radius: 50%; border: 1px solid #333;"></div>
              <div class="legend-text">照明（点灯）</div>
            </div>
            <div class="legend-item">
              <div style="width: 20px; height: 20px; background-color: #f0f0f0; border-radius: 50%; border: 1px solid #333;"></div>
              <div class="legend-text">照明（消灯）</div>
            </div>
          </div>
        </section>
      </div>
    </div>
    
    <!-- コンセント回路セクション -->
    <div id="outletSection" class="section-container">
      <div class="circuit-container">
        <section class="circuit" id="charging-outlet">
          <div class="circuit-title">
            <h2>コンセント回路</h2>
            <div class="circuit-status" id="chargingStatus">切断</div>
          </div>
          <div class="circuit-content larger">
            <svg class="circuit-svg" viewBox="0 0 1000 600" xmlns="http://www.w3.org/2000/svg">
              <!-- ラベル -->
              <text x="80" y="50" font-family="sans-serif" font-size="24" font-weight="bold">0V[接地]</text>
              <text x="30" y="100" font-family="sans-serif" font-size="24" font-weight="bold">100V[非接地]</text>
              
              <!-- 配線 -->
              <path d="M 200 50 L 650 50 L 650 180" stroke="#AAAAAA" stroke-width="8" fill="none" class="w-wire"/>
              <path d="M 200 100 L 550 100 L 550 180" stroke="#333" stroke-width="8" fill="none" class="b-wire"/>
              
              <!-- 電流の流れアニメーション（初期状態では非表示） -->
              <path d="M 200 100 L 550 100 L 550 400 L 650 400 L 650 50 L 200 50" 
                    stroke="#FF961C" stroke-width="4" fill="none" opacity="0" id="current" class="current-path"/>
              
              <!-- コンセント本体 -->
              <rect x="500" y="180" width="200" height="300" rx="20" fill="white" stroke="black" stroke-width="4"/>
              
              <!-- 空のソケット - 未接続時のみ表示 -->
              <g id="emptySocket">
                <!-- 上部ソケット -->
                <rect x="550" y="230" width="100" height="60" rx="15" fill="white" stroke="black" stroke-width="3"/>
                <rect x="575" y="245" width="10" height="30" fill="black"/>
                <rect x="615" y="245" width="10" height="30" fill="black"/>
                
                <!-- 下部ソケット -->
                <rect x="550" y="370" width="100" height="60" rx="15" fill="white" stroke="black" stroke-width="3"/>
                <rect x="575" y="385" width="10" height="30" fill="black"/>
                <rect x="615" y="385" width="10" height="30" fill="black"/>
              </g>

              <!-- コンセント（プラグ接続時用） - 初期表示 -->
              <g id="pluggedOutlet" style="display: none;">
                <!-- 上部ソケット -->
                <rect x="550" y="230" width="100" height="60" rx="15" fill="white" stroke="black" stroke-width="3"/>
                <rect x="575" y="245" width="10" height="30" fill="black"/>
                <rect x="615" y="245" width="10" height="30" fill="black"/>
                
                <!-- 下部ソケット（プラグ挿入済み） -->
                <rect x="550" y="370" width="100" height="60" rx="15" fill="white" stroke="black" stroke-width="3"/>
                
                <!-- プラグ（下部ソケットに挿入済み） -->
                <g transform="translate(600, 410)">
                  <!-- プラグ本体 -->
                  <rect x="-40" y="0" width="80" height="120" rx="5" fill="#AAAAAA" stroke="black" stroke-width="2"/>
                  <!-- プラグ本体の接続部分 -->
                  <rect x="-50" y="-10" width="100" height="20" rx="3" fill="#777" stroke="black" stroke-width="2"/>
                  <!-- プラグ内部 -->
                  <rect x="-25" y="35" width="50" height="70" fill="#666"/>
                  <circle cx="-5" cy="80" r="10" fill="#888"/>
                  <circle cx="10" cy="65" r="10" fill="#888"/>
                  <!-- コード -->
                  <rect x="-10" y="120" width="20" height="40" fill="#999"/>
                </g>
              </g>
              
              <!-- バッテリー -->
              <g id="battery" transform="translate(900, 330)">
                <!-- バッテリー外枠 -->
                <rect x="-60" y="-40" width="120" height="80" rx="10" fill="white" stroke="black" stroke-width="3"/>
                
                <!-- バッテリー端子 -->
                <rect x="60" y="-15" width="10" height="30" rx="2" fill="white" stroke="black" stroke-width="2"/>
                
                <!-- 初期状態：低充電 -->
                <rect x="-50" y="-30" width="35" height="60" fill="black" id="batteryLevel"/>
                
                <!-- 充電マーク（稲妻）- 初期状態では非表示 -->
                <g id="chargingSymbol" opacity="0">
                  <path d="M 20 -30 L -20 5 L 5 5 L -15 30" stroke="#FFA500" stroke-width="12" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M 20 -30 L -20 5 L 5 5 L -15 30" stroke="#FFD700" stroke-width="6" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                </g>
              </g>
              
              <!-- プラグ - 未接続状態 -->
              <g id="disconnectedPlug" class="interactive-element">
                <!-- ブレード部分 -->
                <rect x="280" y="290" width="10" height="60" rx="0" fill="black"/>
                <rect x="310" y="290" width="10" height="60" rx="0" fill="black"/>
                
                <!-- プラグ本体 -->
                <rect x="260" y="340" width="80" height="120" rx="5" fill="#AAAAAA" stroke="black" stroke-width="2"/>
                
                <!-- プラグ本体の接続部分 -->
                <rect x="250" y="330" width="100" height="20" rx="3" fill="#777" stroke="black" stroke-width="2"/>
                
                <!-- プラグ内部 -->
                <rect x="275" y="375" width="50" height="70" fill="#666"/>
                <circle cx="295" cy="420" r="10" fill="#888"/>
                <circle cx="310" cy="405" r="10" fill="#888"/>
                
                <!-- コード -->
                <rect x="290" y="460" width="20" height="40" fill="#999"/>
              </g>
            </svg>
          </div>
          <div class="measurement-display">
            <div class="meter">
              <span class="meter-label">電圧:</span>
              <span class="meter-value" id="outletVoltage">0 V</span>
            </div>
            <div class="meter">
              <span class="meter-label">電流:</span>
              <span class="meter-value" id="outletCurrent">0.0 A</span>
            </div>
            <div class="meter">
              <span class="meter-label">充電状態:</span>
              <span class="meter-value" id="chargingState">30%</span>
            </div>
          </div>
          <div class="circuit-description">
            コンセント回路では、プラグをコンセントに差し込むと電流が流れます。プラグの栓刃を経由して接続機器に電気が通電します。プラグをクリックすると接続・切断が切り替わります。
            <button class="help-tip" data-tip="コンセントの定格は一般的に15Aまでです。複数の電気機器を同時に使用する場合は、合計の消費電流に注意が必要です。">?</button>
          </div>
          <button id="toggleButton" class="button">プラグを挿入/取り外し</button>
          <button id="resetChargingButton" class="button" style="background-color: var(--accent-color); margin-left: 10px;">充電状態をリセット</button>
          
          <div class="safety-notice">
            <div class="safety-title"><span class="safety-icon">⚠️</span> 安全に関する注意</div>
            <p>コンセントの使用時は以下の点に注意してください：</p>
            <ul>
              <li>定格容量（一般的に15A・1500Wまで）を超える機器を接続しない</li>
              <li>たこ足配線を避け、大電力機器は専用回路を使用する</li>
              <li>プラグの抜き差しは必ずプラグ本体を持って行う</li>
            </ul>
          </div>
        </section>
        
        <section class="legend">
          <h2>凡例</h2>
          <div class="legend-items">
            <div class="legend-item">
              <div class="legend-color w-color"></div>
              <div class="legend-text">白線 (接地側) - 0V</div>
            </div>
            <div class="legend-item">
              <div class="legend-color b-color"></div>
              <div class="legend-text">黒線 (非接地側) - 100V</div>
            </div>
            <div class="legend-item">
              <div class="legend-color" style="background-color: #FF961C;"></div>
              <div class="legend-text">電流の流れ</div>
            </div>
            <div class="legend-item">
              <div style="width: 20px; height: 20px; border-radius: 50%; background: linear-gradient(to right, black 30%, white 30%);"></div>
              <div class="legend-text">低充電バッテリー</div>
            </div>
            <div class="legend-item">
              <div style="width: 20px; height: 20px; border-radius: 50%; background: black;"></div>
              <div class="legend-text">充電済みバッテリー</div>
            </div>
          </div>
        </section>
      </div>
    </div>
    
    <!-- トラブルシューティングセクション -->
    <div id="troubleSection" class="section-container">
      <div class="panel">
        <div class="panel-title">トラブルシューティング演習</div>
        <p>以下の故障ケースを解析し、問題の原因を特定して修復する手順を学びましょう。</p>
        
        <div class="circuit">
          <div class="circuit-title">
            <h2>故障ケース1: 片切スイッチの照明が点灯しない</h2>
          </div>
          <div class="circuit-content">
            <svg class="circuit-svg" viewBox="0 0 800 200" xmlns="http://www.w3.org/2000/svg">
              <!-- 故障した回路の図 -->
              <text x="30" y="50" class="label">0V[接地]</text>
              <text x="1" y="150" class="label">100V[非接地]</text>
              
              <path d="M 100 50 L 400 50 L 400 100" stroke="#AAAAAA" stroke-width="3" fill="none" class="w-wire"/>
              
              <path d="M 100 150 L 200 150" stroke="#333" stroke-width="3" fill="none" class="b-wire"/>
              <path d="M 300 150 L 400 150 L 400 120" stroke="#333" stroke-width="3" fill="none" class="b-wire"/>
              
              <g id="brokenSwitch">
                <rect x="200" y="130" width="100" height="40" fill="white" stroke="#333" stroke-width="2" rx="5"/>
                <line x1="200" y1="150" x2="220" y2="150" stroke="#333" stroke-width="3"/>
                <line x1="280" y1="150" x2="300" y2="150" stroke="#333" stroke-width="3"/>
                <line x1="220" y1="150" x2="280" y2="130" stroke="#333" stroke-width="3" stroke-dasharray="5,5"/>
                <circle cx="220" cy="150" r="4" fill="#333"/>
                <circle cx="280" cy="150" r="4" fill="#333"/>
                <text x="250" y="120" text-anchor="middle" font-size="12">故障したスイッチ</text>
              </g>
              
              <circle cx="400" cy="110" r="20" fill="#f0f0f0" stroke="#333" stroke-width="2"/>
              <text x="400" y="115" text-anchor="middle" font-size="11">照明</text>
            </svg>
          </div>
          
          <div class="troubleshooting-panel">
            <div class="problem-desc">症状: スイッチをONにしても照明が点灯しません。考えられる原因を調査してください。</div>
            
            <div class="checklist">
              <li><input type="checkbox" id="check1"> <label for="check1">ブレーカーが落ちていないか確認する</label></li>
              <li><input type="checkbox" id="check2"> <label for="check2">電球が切れていないか確認する</label></li>
              <li><input type="checkbox" id="check3"> <label for="check3">スイッチの接点を確認する</label></li>
              <li><input type="checkbox" id="check4"> <label for="check4">配線の接続を確認する</label></li>
            </div>
            
            <button class="hint-btn" id="troubleHint1">ヒントを表示</button>
            <button class="solution-btn" id="troubleSolution1">解決策を表示</button>
            
            <div id="hint1" style="display: none; margin-top: 10px; padding: 10px; background-color: #f0f8ff; border-left: 4px solid #4D8BC9;">
              ヒント: 点線で表示されているスイッチの接点部分に注目してください。スイッチの接点が正しく接触していないようです。
            </div>
            
            <div id="solution1" style="display: none; margin-top: 10px; padding: 10px; background-color: #f0fff0; border-left: 4px solid #28a745;">
              解決策: <br>
              1. スイッチの接点が摩耗または破損しています。<br>
              2. スイッチを新品に交換します。<br>
              3. 交換前に必ずブレーカーを落として安全を確保してください。<br>
              4. 交換後、正常に動作するか確認します。
            </div>
          </div>
        </div>
        
        <div class="circuit">
          <div class="circuit-title">
            <h2>故障ケース2: 3路スイッチが正常に動作しない</h2>
          </div>
          <div class="circuit-content">
            <svg class="circuit-svg" viewBox="0 0 900 200" xmlns="http://www.w3.org/2000/svg">
              <!-- 故障した3路スイッチ回路の図 -->
              <text x="20" y="50" class="label">0V[接地]</text>
              <text x="1" y="150" class="label">100V[非接地]</text>
              
              <path d="M 80 50 L 650 50 L 650 100" stroke="#AAAAAA" stroke-width="3" fill="none" class="w-wire"/>
              
              <path d="M 80 150 L 150 150" stroke="#333" stroke-width="3" fill="none" class="b-wire"/>
              
              <g id="threeWaySwitch1Normal">
                <rect x="150" y="130" width="70" height="60" fill="white" stroke="#333" stroke-width="2" rx="5"/>
                <line x1="150" y1="150" x2="170" y2="150" stroke="#333" stroke-width="3"/>
                <circle cx="170" cy="150" r="4" fill="#333"/>
                <circle cx="200" cy="140" r="4" fill="#333"/>
                <circle cx="200" cy="160" r="4" fill="#333"/>
                <line x1="170" y1="150" x2="200" y2="140" stroke="#333" stroke-width="3"/>
                <text x="185" y="120" text-anchor="middle" font-size="12">正常</text>
              </g>
              
              <path d="M 200 140 L 390 140" stroke="#FF0000" stroke-width="3" fill="none" class="r-wire" stroke-dasharray="5,5"/>
              <path d="M 200 160 L 390 160" stroke="#FF0000" stroke-width="3" fill="none" class="r-wire"/>
              
              <g id="threeWaySwitch2Normal">
                <rect x="390" y="130" width="70" height="60" fill="white" stroke="#333" stroke-width="2" rx="5"/>
                <circle cx="390" cy="140" r="4" fill="#333"/>
                <circle cx="390" cy="160" r="4" fill="#333"/>
                <circle cx="440" cy="150" r="4" fill="#333"/>
                <line x1="390" y1="140" x2="440" y2="150" stroke="#333" stroke-width="3"/>
                <line x1="440" y1="150" x2="460" y2="150" stroke="#333" stroke-width="3"/>
                <text x="425" y="120" text-anchor="middle" font-size="12">正常</text>
              </g>
              
              <path d="M 460 150 L 650 150 L 650 120" stroke="#333" stroke-width="3" fill="none" class="b-wire"/>
              
              <circle cx="650" cy="110" r="20" fill="#f0f0f0" stroke="#333" stroke-width="2"/>
              <text x="650" y="115" text-anchor="middle" font-size="12">照明</text>
              
              <rect x="290" y="117" width="70" height="18" fill="#FFCCCC" opacity="0.8" rx="3"></rect>
              <text x="325" y="130" text-anchor="middle" font-size="12" fill="red">断線！</text>
            </svg>
          </div>
          
          <div class="troubleshooting-panel">
            <div class="problem-desc">症状: 3路スイッチの片方を操作しても照明が点灯しないケースがあります。何が問題でしょうか？</div>
            
            <div class="checklist">
              <li><input type="checkbox" id="check5"> <label for="check5">両方のスイッチの動作を確認する</label></li>
              <li><input type="checkbox" id="check6"> <label for="check6">トラベラー線（赤線）の接続を確認する</label></li>
              <li><input type="checkbox" id="check7"> <label for="check7">照明器具の状態を確認する</label></li>
              <li><input type="checkbox" id="check8"> <label for="check8">配線の導通テストを行う</label></li>
            </div>
            
            <button class="hint-btn" id="troubleHint2">ヒントを表示</button>
            <button class="solution-btn" id="troubleSolution2">解決策を表示</button>
            
            <div id="hint2" style="display: none; margin-top: 10px; padding: 10px; background-color: #f0f8ff; border-left: 4px solid #4D8BC9;">
              ヒント: 図の上部のトラベラー線（赤線）に注目してください。点線で表示されているのは断線を示しています。
            </div>
            
            <div id="solution2" style="display: none; margin-top: 10px; padding: 10px; background-color: #f0fff0; border-left: 4px solid #28a745;">
              解決策: <br>
              1. 上部のトラベラー線（赤線）が断線しています。<br>
              2. 断線箇所を特定し、配線を新しいものに交換します。<br>
              3. 壁内配線の交換が難しい場合は、電気工事士に依頼してください。<br>
              4. 交換後、両方のスイッチで正常に操作できるか確認します。
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- 安全情報セクション -->
    <div id="safetySection" class="section-container">
      <div class="panel">
        <div class="panel-title">電気工事の安全基準</div>
        <p>電気設備工事を行う際は、「電気設備技術基準」および「内線規程」に基づいた安全な施工が求められます。</p>
        
        <div class="safety-notice">
          <div class="safety-title"><span class="safety-icon">⚠️</span> 電気工事士資格の必要性</div>
          <p>電気工事は「電気工事士法」により、有資格者（第一種・第二種電気工事士）が行うことが法律で定められています。無資格での電気工事は違法であり、罰則の対象となります。</p>
        </div>
        
        <h3 style="margin-top: 20px; color: var(--corporate-color);">感電防止の基本</h3>
        <ul>
          <li>作業前に必ず該当する回路のブレーカーを切る</li>
          <li>電圧検電器で通電していないことを確認する</li>
          <li>絶縁手袋や絶縁工具を適切に使用する</li>
          <li>濡れた手や濡れた床での作業は避ける</li>
        </ul>
        
        <h3 style="margin-top: 20px; color: var(--corporate-color);">火災防止のポイント</h3>
        <ul>
          <li>配線は定格電流に適した太さを選定する</li>
          <li>接続部は確実に締め付け、緩みがないようにする</li>
          <li>引火性物質の近くでの作業は避ける</li>
          <li>配線の束ね過ぎによる発熱を防止する</li>
        </ul>
        
        <h3 style="margin-top: 20px; color: var(--corporate-color);">緊急時の対応</h3>
        <ol>
          <li>感電者を発見した場合：
            <ul>
              <li>まず電源を切るか、絶縁物を使って感電者を電源から引き離す</li>
              <li>意識・呼吸を確認し、必要に応じて救急車を呼ぶ（119番）</li>
            </ul>
          </li>
          <li>電気火災の場合：
            <ul>
              <li>可能であれば電源を遮断する</li>
              <li>消火器（電気火災用）を使用する</li>
              <li>水は使わない（感電の危険性があるため）</li>
            </ul>
          </li>
        </ol>
      </div>
      
      <div class="panel">
        <div class="panel-title">保守点検のポイント</div>
        <p>定期的な点検により、事故を未然に防ぎ、設備の長寿命化を図ることができます。</p>
        
        <h3 style="margin-top: 20px; color: var(--corporate-color);">日常点検項目</h3>
        <div class="checklist">
          <li><input type="checkbox"> <label>スイッチの動作音や感触に異常がないか</label></li>
          <li><input type="checkbox"> <label>コンセントにガタつきやひび割れがないか</label></li>
          <li><input type="checkbox"> <label>異常な発熱や焦げた臭いがしないか</label></li>
          <li><input type="checkbox"> <label>漏電遮断器のテストボタンが正常に動作するか</label></li>
        </div>
        
        <h3 style="margin-top: 20px; color: var(--corporate-color);">定期点検項目（専門家による点検）</h3>
        <div class="checklist">
          <li><input type="checkbox"> <label>配線の絶縁抵抗測定</label></li>
          <li><input type="checkbox"> <label>端子の緩みや接触不良のチェック</label></li>
          <li><input type="checkbox"> <label>アース（接地）抵抗の測定</label></li>
          <li><input type="checkbox"> <label>配電盤内部の点検・清掃</label></li>
        </div>
      </div>
    </div>
    
    <!-- 理解度チェックセクション -->
    <div id="quizSection" class="section-container">
      <div class="panel">
        <div class="panel-title">理解度チェック</div>
        <p>以下の問題に回答して、学習内容の理解度をチェックしましょう。</p>
        
        <div class="quiz-container">
          <div class="quiz-question">1. 片切スイッチは何箇所から照明を操作できますか？</div>
          <ul class="quiz-options">
            <li><input type="radio" name="q1" id="q1a" value="a"> <label for="q1a">1箇所</label></li>
            <li><input type="radio" name="q1" id="q1b" value="b"> <label for="q1b">2箇所</label></li>
            <li><input type="radio" name="q1" id="q1c" value="c"> <label for="q1c">3箇所</label></li>
            <li><input type="radio" name="q1" id="q1d" value="d"> <label for="q1d">4箇所</label></li>
          </ul>
          
          <div class="quiz-question">2. 3路スイッチ回路で特徴的な配線は次のうちどれですか？</div>
          <ul class="quiz-options">
            <li><input type="radio" name="q2" id="q2a" value="a"> <label for="q2a">白線（W）</label></li>
            <li><input type="radio" name="q2" id="q2b" value="b"> <label for="q2b">黒線（B）</label></li>
            <li><input type="radio" name="q2" id="q2c" value="c"> <label for="q2c">赤線（R）/トラベラー線</label></li>
            <li><input type="radio" name="q2" id="q2d" value="d"> <label for="q2d">緑線（接地線）</label></li>
          </ul>
          
          <div class="quiz-question">3. 3路+4路スイッチ回路は、何箇所から照明を操作できますか？</div>
          <ul class="quiz-options">
            <li><input type="radio" name="q3" id="q3a" value="a"> <label for="q3a">2箇所</label></li>
            <li><input type="radio" name="q3" id="q3b" value="b"> <label for="q3b">3箇所</label></li>
            <li><input type="radio" name="q3" id="q3c" value="c"> <label for="q3c">4箇所</label></li>
            <li><input type="radio" name="q3" id="q3d" value="d"> <label for="q3d">無制限</label></li>
          </ul>
          
          <div class="quiz-question">4. 電気工事を行える資格者は誰ですか？</div>
          <ul class="quiz-options">
            <li><input type="radio" name="q4" id="q4a" value="a"> <label for="q4a">誰でも可能</label></li>
            <li><input type="radio" name="q4" id="q4b" value="b"> <label for="q4b">電気工事士（第一種・第二種）の資格保有者</label></li>
            <li><input type="radio" name="q4" id="q4c" value="c"> <label for="q4c">建築士</label></li>
            <li><input type="radio" name="q4" id="q4d" value="d"> <label for="q4d">消防設備士</label></li>
          </ul>
          
          <div class="quiz-question">5. 一般住宅のコンセント回路の定格電流は一般的に何アンペアですか？</div>
          <ul class="quiz-options">
            <li><input type="radio" name="q5" id="q5a" value="a"> <label for="q5a">5A</label></li>
            <li><input type="radio" name="q5" id="q5b" value="b"> <label for="q5b">10A</label></li>
            <li><input type="radio" name="q5" id="q5c" value="c"> <label for="q5c">15A</label></li>
            <li><input type="radio" name="q5" id="q5d" value="d"> <label for="q5d">30A</label></li>
          </ul>
          
          <button class="check-answer-btn" id="checkAnswersBtn">回答を確認</button>
          <div id="quizResults" style="margin-top: 15px; display: none;"></div>
        </div>
      </div>
    </div>
  </main>
  
  <footer class="footer">
    <div>電気技術研修資料</div>
    <div class="page-number">1</div>
  </footer>
  
  <!-- ツールチップ用 -->
  <div class="tooltip" id="tooltip"></div>
  
  <script src="js/circuit-simulator.js"></script>
</body>
</html>