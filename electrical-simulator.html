<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é›»æ°—å·¥å­¦åŸºç¤ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
    <style>
        :root {
            --primary-color: #005BAB;
            --secondary-color: #FF961C;
            --light-blue: #E0EEF9;
            --medium-blue: #4D8BC9;
            --neutral-grey: #F5F5F5;
            --dark-grey: #616161;
            --text-dark: #333333;
            --text-light: #FFFFFF;
            --success-color: #4CAF50;
            --warning-color: #FFC107;
            --danger-color: #F44336;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: Meiryo, "Hiragino Kaku Gothic Pro", sans-serif;
            background-color: #f0f4f8;
            color: var(--text-dark);
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--medium-blue) 100%);
            color: var(--text-light);
            padding: 2rem;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(0.8); opacity: 0.5; }
            50% { transform: scale(1.2); opacity: 0.8; }
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            z-index: 1;
            position: relative;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            z-index: 1;
            position: relative;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .tabs {
            display: flex;
            justify-content: center;
            margin: 2rem 0;
            background: white;
            padding: 0.5rem;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            flex-wrap: wrap;
        }
        
        .tab-button {
            background: none;
            border: none;
            padding: 1rem 2rem;
            margin: 0.25rem;
            font-size: 1rem;
            font-weight: 600;
            color: var(--dark-grey);
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .tab-button::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 3px;
            background: var(--secondary-color);
            transition: width 0.3s ease;
        }
        
        .tab-button:hover {
            background: var(--light-blue);
            transform: translateY(-2px);
        }
        
        .tab-button.active {
            background: var(--primary-color);
            color: white;
        }
        
        .tab-button.active::before {
            width: 100%;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.12);
        }
        
        .control-group {
            margin: 1.5rem 0;
            padding: 1rem;
            background: var(--neutral-grey);
            border-radius: 8px;
        }
        
        .control-label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }
        
        .slider-container {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin: 0.5rem 0;
        }
        
        input[type="range"] {
            flex: 1;
            height: 8px;
            border-radius: 4px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--secondary-color);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
            box-shadow: 0 0 0 8px rgba(255,150,28,0.2);
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--secondary-color);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .value-display {
            min-width: 80px;
            padding: 0.5rem 1rem;
            background: var(--primary-color);
            color: white;
            border-radius: 6px;
            font-weight: 600;
            text-align: center;
        }
        
        select {
            padding: 0.75rem;
            border: 2px solid var(--primary-color);
            border-radius: 6px;
            font-size: 1rem;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        select:hover {
            border-color: var(--secondary-color);
        }
        
        select:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(0,91,171,0.2);
        }
        
        .result-box {
            background: linear-gradient(135deg, var(--light-blue) 0%, white 100%);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1rem 0;
            border: 2px solid var(--primary-color);
        }
        
        .result-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-color);
            margin: 0.5rem 0;
        }
        
        .formula {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 1rem 0;
            border-left: 4px solid var(--secondary-color);
        }
        
        .svg-container {
            display: flex;
            justify-content: center;
            margin: 2rem 0;
        }
        
        .comparison-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .comparison-item {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            border: 2px solid #e0e0e0;
            transition: all 0.3s ease;
        }
        
        .comparison-item:hover {
            border-color: var(--primary-color);
            transform: scale(1.02);
        }
        
        .comparison-item h4 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 0.5rem;
        }
        
        .status-good {
            background: var(--success-color);
            box-shadow: 0 0 10px rgba(76,175,80,0.5);
        }
        
        .status-warning {
            background: var(--warning-color);
            box-shadow: 0 0 10px rgba(255,193,7,0.5);
        }
        
        .status-danger {
            background: var(--danger-color);
            box-shadow: 0 0 10px rgba(244,67,54,0.5);
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
            color: var(--primary-color);
            cursor: help;
            text-decoration: underline dotted;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 300px;
            background-color: #333;
            color: #fff;
            text-align: left;
            border-radius: 8px;
            padding: 12px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -150px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9rem;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        .interactive-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0.5rem;
        }
        
        .interactive-button:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255,150,28,0.3);
        }
        
        .alert {
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 8px;
            display: flex;
            align-items: center;
        }
        
        .alert-info {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            color: #1565c0;
        }
        
        .alert-warning {
            background: #fff3e0;
            border: 1px solid #ff9800;
            color: #e65100;
        }
        
        .alert-danger {
            background: #ffebee;
            border: 1px solid #f44336;
            color: #b71c1c;
        }
        
        .comparison-panel {
            position: fixed;
            right: -400px;
            top: 0;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -4px 0 12px rgba(0,0,0,0.15);
            transition: right 0.3s ease;
            z-index: 1000;
            overflow-y: auto;
        }
        
        .comparison-panel.active {
            right: 0;
        }
        
        .comparison-header {
            background: var(--primary-color);
            color: white;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .comparison-content {
            padding: 1rem;
        }
        
        .saved-result {
            background: var(--light-blue);
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 8px;
            position: relative;
        }
        
        .delete-result {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: var(--danger-color);
            color: white;
            border: none;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            cursor: pointer;
        }
        
        @keyframes slideDown {
            from { transform: translate(-50%, -100%); opacity: 0; }
            to { transform: translate(-50%, 0); opacity: 1; }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; transform: translate(-50%, -20px); }
        }
        
        @media (max-width: 768px) {
            .comparison-panel {
                width: 100%;
            }
            .container {
                padding: 1rem;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .tabs {
                padding: 0.25rem;
            }
            
            .tab-button {
                padding: 0.75rem 1rem;
                font-size: 0.9rem;
            }
            
            .card {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>âš¡ é›»æ°—å·¥å­¦åŸºç¤ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</h1>
        <p class="subtitle">åˆå¿ƒè€…ã§ã‚‚æ¥½ã—ãå­¦ã¹ã‚‹é›»åŠ›ãƒ»é›»åœ§ãƒ»é›»æµã®ä¸–ç•Œ</p>
    </header>
    
    <div class="container">
        <div class="tabs">
            <button class="tab-button active" onclick="showTab('power-factor')">é›»åŠ›ã¨åŠ›ç‡</button>
            <button class="tab-button" onclick="showTab('voltage-drop')">é›»åœ§é™ä¸‹è¨ˆç®—</button>
            <button class="tab-button" onclick="showTab('allowable-current')">é›»ç·šã®è¨±å®¹é›»æµ</button>
            <button class="tab-button" onclick="showTab('distribution-system')">é…é›»æ–¹å¼æ¯”è¼ƒ</button>
        </div>
    
    <!-- æ¯”è¼ƒãƒ‘ãƒãƒ« -->
    <div id="comparison-panel" class="comparison-panel">
        <div class="comparison-header">
            <h3>ğŸ“Š ä¿å­˜ã—ãŸè¨ˆç®—çµæœ</h3>
            <button onclick="toggleComparisonPanel()" style="background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer;">Ã—</button>
        </div>
        <div class="comparison-content" id="saved-results">
            <p style="text-align: center; color: #999;">ä¿å­˜ã•ã‚ŒãŸçµæœãŒã‚ã‚Šã¾ã›ã‚“</p>
        </div>
    </div>
    
    <!-- æ¯”è¼ƒãƒœã‚¿ãƒ³ -->
    <button onclick="toggleComparisonPanel()" style="position: fixed; right: 20px; bottom: 20px; background: var(--secondary-color); color: white; border: none; padding: 1rem; border-radius: 50%; width: 60px; height: 60px; font-size: 1.5rem; cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.3); transition: all 0.3s ease;">
        ğŸ“Š
    </button>
        
        <!-- é›»åŠ›ã¨åŠ›ç‡ã‚¿ãƒ– -->
        <div id="power-factor" class="tab-content active">
            <div class="card">
                <h2>ğŸ“Š é›»åŠ›ã¨åŠ›ç‡ã®é–¢ä¿‚</h2>
                
                <div class="alert alert-info" style="margin-bottom: 1.5rem;">
                    <h4>ğŸ” åŸºæœ¬æ¦‚å¿µã®ç†è§£</h4>
                    <p><strong>é›»åŠ›ã«ã¯3ç¨®é¡ã‚ã‚Šã¾ã™ï¼š</strong></p>
                    <ul style="margin: 0.5rem 0;">
                        <li><strong>æœ‰åŠ¹é›»åŠ›ï¼ˆPï¼‰</strong>ï¼šå®Ÿéš›ã«ä»•äº‹ã‚’ã™ã‚‹é›»åŠ›ã€‚å˜ä½ã¯ Wï¼ˆãƒ¯ãƒƒãƒˆï¼‰</li>
                        <li><strong>ç„¡åŠ¹é›»åŠ›ï¼ˆQï¼‰</strong>ï¼šç£ç•Œã‚’ä½œã‚‹ã ã‘ã§ä»•äº‹ã‚’ã—ãªã„é›»åŠ›ã€‚å˜ä½ã¯ varï¼ˆãƒãƒ¼ãƒ«ï¼‰</li>
                        <li><strong>çš®ç›¸é›»åŠ›ï¼ˆSï¼‰</strong>ï¼šé›»ç·šã‚’æµã‚Œã‚‹å…¨ä½“ã®é›»åŠ›ã€‚å˜ä½ã¯ VAï¼ˆãƒœãƒ«ãƒˆã‚¢ãƒ³ãƒšã‚¢ï¼‰</li>
                    </ul>
                    <p style="margin-top: 0.5rem;">ã“ã‚Œã‚‰ã¯ã€ŒåŠ›ç‡ä¸‰è§’å½¢ã€ã¨ã„ã†ç›´è§’ä¸‰è§’å½¢ã®é–¢ä¿‚ã«ã‚ã‚Šã¾ã™ã€‚</p>
                </div>
                
                <div class="control-group">
                    <label class="control-label">é›»åœ§ (V)</label>
                    <div class="slider-container">
                        <input type="range" id="voltage-pf" min="100" max="500" value="200" step="10" onchange="updatePowerFactor()">
                        <span class="value-display" id="voltage-pf-value">200V</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <label class="control-label">é›»æµ (A)</label>
                    <div class="slider-container">
                        <input type="range" id="current-pf" min="1" max="100" value="50" step="1" onchange="updatePowerFactor()">
                        <span class="value-display" id="current-pf-value">50A</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <label class="control-label">åŠ›ç‡ (cosÎ¸)</label>
                    <div class="slider-container">
                        <input type="range" id="power-factor" min="0" max="100" value="85" step="1" onchange="updatePowerFactor()">
                        <span class="value-display" id="power-factor-value">0.85</span>
                    </div>
                </div>
                
                <div class="svg-container">
                    <svg id="power-triangle" width="600" height="400" viewBox="0 0 600 400">
                        <!-- åŠ›ç‡ä¸‰è§’å½¢ -->
                        <defs>
                            <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
                            </marker>
                        </defs>
                        
                        <!-- èƒŒæ™¯ã‚°ãƒªãƒƒãƒ‰ -->
                        <g opacity="0.2">
                            <line x1="50" y1="300" x2="550" y2="300" stroke="#ddd" stroke-width="1"/>
                            <line x1="100" y1="50" x2="100" y2="350" stroke="#ddd" stroke-width="1"/>
                        </g>
                        
                        <!-- åŠ›ç‡ä¸‰è§’å½¢ -->
                        <g id="triangle-group">
                            <!-- æœ‰åŠ¹é›»åŠ› (æ¨ª) -->
                            <line x1="100" y1="300" x2="400" y2="300" stroke="#4CAF50" stroke-width="4" marker-end="url(#arrowhead)"/>
                            <text x="250" y="320" text-anchor="middle" font-size="16" font-weight="bold" fill="#4CAF50">æœ‰åŠ¹é›»åŠ› P</text>
                            <text x="250" y="340" text-anchor="middle" font-size="14" id="active-power-text">8500W</text>
                            
                            <!-- ç„¡åŠ¹é›»åŠ› (ç¸¦) -->
                            <line x1="400" y1="300" x2="400" y2="200" stroke="#FF9800" stroke-width="4" marker-end="url(#arrowhead)"/>
                            <text x="430" y="250" font-size="16" font-weight="bold" fill="#FF9800">ç„¡åŠ¹é›»åŠ› Q</text>
                            <text x="430" y="270" font-size="14" id="reactive-power-text">5268var</text>
                            
                            <!-- çš®ç›¸é›»åŠ› (æ–œè¾º) -->
                            <line x1="100" y1="300" x2="400" y2="200" stroke="#2196F3" stroke-width="4" marker-end="url(#arrowhead)"/>
                            <text x="200" y="240" font-size="16" font-weight="bold" fill="#2196F3" transform="rotate(-18 200 240)">çš®ç›¸é›»åŠ› S</text>
                            <text x="200" y="260" font-size="14" id="apparent-power-text" transform="rotate(-18 200 260)">10000VA</text>
                            
                            <!-- è§’åº¦è¡¨ç¤º -->
                            <path d="M 150 300 A 50 50 0 0 0 173 266" fill="none" stroke="#FF961C" stroke-width="2"/>
                            <text x="170" y="290" font-size="14" fill="#FF961C" id="angle-text">Î¸=31.8Â°</text>
                        </g>
                    </svg>
                </div>
                
                <div class="result-box">
                    <h3>è¨ˆç®—çµæœ</h3>
                    <div class="formula">
                        SÂ² = PÂ² + QÂ² ï¼ˆãƒ”ã‚¿ã‚´ãƒ©ã‚¹ã®å®šç†ï¼‰
                    </div>
                    <p><strong>æœ‰åŠ¹é›»åŠ› (P):</strong> <span class="result-value" id="active-power">8,500 W</span></p>
                    <p><strong>ç„¡åŠ¹é›»åŠ› (Q):</strong> <span class="result-value" id="reactive-power">5,268 var</span></p>
                    <p><strong>çš®ç›¸é›»åŠ› (S):</strong> <span class="result-value" id="apparent-power">10,000 VA</span></p>
                    <p><strong>ä½ç›¸è§’ (Î¸):</strong> <span class="result-value" id="phase-angle">31.8Â°</span></p>
                    <button class="interactive-button" onclick="savePowerFactorResult()">ğŸ“Š çµæœã‚’ä¿å­˜</button>
                </div>
                
                <div class="card" style="background: #f8f9fa;">
                    <h3>ğŸ“š å®Ÿç”¨çŸ¥è­˜ï¼šåŠ›ç‡ã®å®Ÿä¾‹</h3>
                    
                    <h4>ğŸ­ æ©Ÿå™¨åˆ¥ã®å…¸å‹çš„ãªåŠ›ç‡</h4>
                    <table style="width: 100%; margin: 1rem 0;">
                        <thead>
                            <tr style="background: var(--primary-color); color: white;">
                                <th style="padding: 0.5rem;">æ©Ÿå™¨</th>
                                <th style="padding: 0.5rem;">åŠ›ç‡</th>
                                <th style="padding: 0.5rem;">ç‰¹å¾´</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">ç™½ç†±é›»çƒ</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">1.0ï¼ˆ100%ï¼‰</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">æŠµæŠ—ã®ã¿ã€ç†æƒ³çš„</td>
                            </tr>
                            <tr style="background: #f5f5f5;">
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">LEDç…§æ˜</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">0.95ï½0.98</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">é›»æºå›è·¯ã«ã‚ˆã‚Šé«˜åŠ›ç‡</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">è›å…‰ç¯ï¼ˆå®‰å®šå™¨ï¼‰</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">0.5ï½0.6</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">ã‚¤ãƒ³ãƒ€ã‚¯ã‚¿ãƒ³ã‚¹ãŒå¤§ãã„</td>
                            </tr>
                            <tr style="background: #f5f5f5;">
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">ã‚¨ã‚¢ã‚³ãƒ³ï¼ˆã‚¤ãƒ³ãƒãƒ¼ã‚¿ï¼‰</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">0.95ï½0.98</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">ã‚¤ãƒ³ãƒãƒ¼ã‚¿åˆ¶å¾¡ã§æ”¹å–„</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">ãƒ¢ãƒ¼ã‚¿ãƒ¼ï¼ˆç„¡è² è·ï¼‰</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">0.2ï½0.3</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">ç©ºå›ã‚Šã¯åŠ›ç‡æœ€æ‚ª</td>
                            </tr>
                            <tr style="background: #f5f5f5;">
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">ãƒ¢ãƒ¼ã‚¿ãƒ¼ï¼ˆå®šæ ¼è² è·ï¼‰</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">0.8ï½0.85</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">é©æ­£è² è·ã§æ”¹å–„</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="alert alert-info">
                        <h4>ğŸ’° é›»æ°—æ–™é‡‘ã¸ã®å½±éŸ¿ï¼ˆå®Ÿä¾‹ï¼‰</h4>
                        <p><strong>å¥‘ç´„é›»åŠ›50kWã®å·¥å ´ã®å ´åˆï¼š</strong></p>
                        <ul>
                            <li>åŠ›ç‡85%ï¼šåŸºæœ¬æ–™é‡‘ã¯æ¨™æº–ï¼ˆå‰²å¼•ãªã—ï¼‰</li>
                            <li>åŠ›ç‡95%ï¼šåŸºæœ¬æ–™é‡‘5%å‰²å¼• â†’ å¹´é–“ç´„6ä¸‡å††å‰Šæ¸›</li>
                            <li>åŠ›ç‡75%ï¼šåŸºæœ¬æ–™é‡‘5%å‰²å¢— â†’ å¹´é–“ç´„6ä¸‡å††å¢—åŠ </li>
                        </ul>
                        <p style="margin-top: 0.5rem;">â€»åŸºæœ¬æ–™é‡‘1,000å††/kWã§è¨ˆç®—</p>
                    </div>
                </div>
                
                <div class="card">
                    <h3>ğŸ”§ åŠ›ç‡æ”¹å–„ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h3>
                    
                    <div class="alert alert-warning" style="margin-bottom: 1rem;">
                        <h4>ğŸ’¡ ãªãœåŠ›ç‡æ”¹å–„ãŒå¿…è¦ï¼Ÿ</h4>
                        <ul style="margin: 0.5rem 0;">
                            <li><strong>é›»æ°—æ–™é‡‘ã®å‰Šæ¸›</strong>ï¼šåŠ›ç‡ãŒ85%æœªæº€ã ã¨å‰²å¢—æ–™é‡‘ã€85%ä»¥ä¸Šã§å‰²å¼•</li>
                            <li><strong>é€é›»æå¤±ã®å‰Šæ¸›</strong>ï¼šé›»æµãŒæ¸›ã‚‹ã“ã¨ã§é›»ç·šã§ã®ç™ºç†±ãƒ­ã‚¹ãŒæ¸›å°‘</li>
                            <li><strong>è¨­å‚™å®¹é‡ã®æœ‰åŠ¹æ´»ç”¨</strong>ï¼šåŒã˜è¨­å‚™ã§ã‚ˆã‚Šå¤šãã®æœ‰åŠ¹é›»åŠ›ã‚’é€ã‚Œã‚‹</li>
                            <li><strong>é›»åœ§é™ä¸‹ã®æ”¹å–„</strong>ï¼šé›»æµæ¸›å°‘ã«ã‚ˆã‚Šé›»åœ§ã®å®‰å®šæ€§ãŒå‘ä¸Š</li>
                        </ul>
                    </div>
                    <div class="control-group">
                        <label class="control-label">ç›®æ¨™åŠ›ç‡</label>
                        <div class="slider-container">
                            <input type="range" id="target-pf" min="85" max="100" value="95" step="1" onchange="calculateCapacitor()">
                            <span class="value-display" id="target-pf-value">0.95</span>
                        </div>
                    </div>
                    
                    <div class="result-box">
                        <h4>å¿…è¦ãªé€²ç›¸ã‚³ãƒ³ãƒ‡ãƒ³ã‚µå®¹é‡</h4>
                        <div class="formula">
                            Q_c = P Ã— (tanÎ¸â‚ - tanÎ¸â‚‚)<br>
                            ã“ã“ã§ã€Î¸â‚ = cosâ»Â¹(ç¾åœ¨ã®åŠ›ç‡)ã€Î¸â‚‚ = cosâ»Â¹(ç›®æ¨™åŠ›ç‡)
                        </div>
                        <p><strong>å¿…è¦å®¹é‡:</strong> <span class="result-value" id="capacitor-kvar">3,000 kvar</span></p>
                        <p><strong>æ”¹å–„åŠ¹æœ:</strong></p>
                        <ul>
                            <li>é›»æµå‰Šæ¸›ç‡: <span id="current-reduction">10.5%</span></li>
                            <li>åŸºæœ¬æ–™é‡‘å‰Šæ¸›: <span id="cost-reduction">ç´„10%</span></li>
                            <li>é€é›»æå¤±å‰Šæ¸›: <span id="loss-reduction">ç´„20%</span></li>
                        </ul>
                        <div class="alert alert-warning" style="margin-top: 1rem;">
                            <p>âš ï¸ <strong>æ³¨æ„:</strong> é€²ç›¸ã‚³ãƒ³ãƒ‡ãƒ³ã‚µã®éè£œå„Ÿã¯é›»åœ§ä¸Šæ˜‡ã‚’å¼•ãèµ·ã“ã™ãŸã‚ã€é©åˆ‡ãªå®¹é‡é¸å®šãŒé‡è¦ã§ã™ã€‚</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- é›»åœ§é™ä¸‹è¨ˆç®—ã‚¿ãƒ– -->
        <div id="voltage-drop" class="tab-content">
            <div class="card">
                <h2>ğŸ“‰ é›»åœ§é™ä¸‹è¨ˆç®—ãƒ„ãƒ¼ãƒ«</h2>
                
                <div class="alert alert-info" style="margin-bottom: 1.5rem;">
                    <h4>ğŸ” é›»åœ§é™ä¸‹ã¨ã¯ï¼Ÿ</h4>
                    <p><strong>é›»ç·šã«ã¯æŠµæŠ—ãŒã‚ã‚‹ãŸã‚ã€é›»æµãŒæµã‚Œã‚‹ã¨é›»åœ§ãŒä¸‹ãŒã‚Šã¾ã™ã€‚</strong></p>
                    <p>ä¾‹ï¼š100Vã®é›»æºã‹ã‚‰50mé›¢ã‚ŒãŸå ´æ‰€ã§ã¯ã€98Vã«ãªã£ã¦ã—ã¾ã†ï¼ˆ2Vé™ä¸‹ï¼‰</p>
                    
                    <h5 style="margin-top: 1rem;">ğŸ“Š è¨±å®¹ã•ã‚Œã‚‹é›»åœ§é™ä¸‹</h5>
                    <ul style="margin: 0.5rem 0;">
                        <li><strong>å¹¹ç·šï¼š2%ä»¥å†…</strong>ï¼ˆ200Vãªã‚‰4Vä»¥å†…ï¼‰</li>
                        <li><strong>åˆ†å²å›è·¯ï¼š2%ä»¥å†…</strong>ï¼ˆåˆè¨ˆã§4%ä»¥å†…ï¼‰</li>
                        <li><strong>ä¸€æ™‚çš„ãªè² è·ï¼ˆãƒ¢ãƒ¼ã‚¿ãƒ¼èµ·å‹•æ™‚ãªã©ï¼‰ï¼š7%ç¨‹åº¦</strong></li>
                    </ul>
                    
                    <h5 style="margin-top: 1rem;">âš ï¸ é›»åœ§é™ä¸‹ãŒå¤§ãã„ã¨...</h5>
                    <ul style="margin: 0.5rem 0;">
                        <li>ç…§æ˜ãŒæš—ããªã‚‹ï¼ˆ90Vã§ç´„80%ã®æ˜ã‚‹ã•ï¼‰</li>
                        <li>ãƒ¢ãƒ¼ã‚¿ãƒ¼ã®åŠ›ãŒå¼±ããªã‚‹ï¼ˆé›»åœ§ã®2ä¹—ã«æ¯”ä¾‹ï¼‰</li>
                        <li>é›»å­æ©Ÿå™¨ãŒèª¤å‹•ä½œã™ã‚‹å¯èƒ½æ€§</li>
                        <li>ç™ºç†±ã«ã‚ˆã‚‹é›»åŠ›æå¤±ãŒå¢—åŠ </li>
                    </ul>
                </div>
                
                <div class="control-group">
                    <label class="control-label">é…é›»æ–¹å¼</label>
                    <select id="distribution-type" onchange="updateVoltageDrop()">
                        <option value="single2">å˜ç›¸2ç·šå¼</option>
                        <option value="single3">å˜ç›¸3ç·šå¼</option>
                        <option value="three3">ä¸‰ç›¸3ç·šå¼</option>
                    </select>
                    <div class="alert alert-info" style="margin-top: 0.5rem;">
                        <p>ğŸ’¡ <strong>ä¿‚æ•°ã®æ ¹æ‹ :</strong> éŠ…ã®æŠµæŠ—ç‡ 1.78Ã—10â»â¸ Î©m ã‚’åŸºã«ã€å¾€å¾©åˆ†ã‚’è€ƒæ…®ã—ãŸç°¡æ˜“å¼ã§ã™ã€‚<br>
                        å˜ç›¸2ç·šå¼: 35.6 = 2 Ã— 17.8ï¼ˆå¾€å¾©ï¼‰<br>
                        å˜ç›¸3ç·šå¼: 17.8ï¼ˆç‰‡é“ï¼‰<br>
                        ä¸‰ç›¸3ç·šå¼: 30.8 = âˆš3 Ã— 17.8</p>
                    </div>
                </div>
                
                <div class="control-group">
                    <label class="control-label">é›»ç·šé•·ã• (m)</label>
                    <div class="slider-container">
                        <input type="range" id="cable-length" min="10" max="500" value="100" step="10" onchange="updateVoltageDrop()">
                        <span class="value-display" id="cable-length-value">100m</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <label class="control-label">é›»æµ (A)</label>
                    <div class="slider-container">
                        <input type="range" id="current-vd" min="1" max="100" value="30" step="1" onchange="updateVoltageDrop()">
                        <span class="value-display" id="current-vd-value">30A</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <label class="control-label">é›»ç·šæ–­é¢ç© (mmÂ²)</label>
                    <select id="cable-size" onchange="updateVoltageDrop()">
                        <option value="1.6">1.6 mmÂ²</option>
                        <option value="2.0" selected>2.0 mmÂ²</option>
                        <option value="2.6">2.6 mmÂ²</option>
                        <option value="5.5">5.5 mmÂ²</option>
                        <option value="8">8.0 mmÂ²</option>
                        <option value="14">14 mmÂ²</option>
                        <option value="22">22 mmÂ²</option>
                        <option value="38">38 mmÂ²</option>
                    </select>
                </div>
                
                <div class="svg-container">
                    <svg width="600" height="300" viewBox="0 0 600 300">
                        <!-- é›»åœ§é™ä¸‹ã®è¦–è¦šåŒ– -->
                        <defs>
                            <linearGradient id="voltageGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:#4CAF50;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#FF5252;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        
                        <!-- é›»åœ§ãƒ¬ãƒ™ãƒ«è¡¨ç¤º -->
                        <rect x="50" y="100" width="500" height="40" fill="url(#voltageGradient)" opacity="0.3"/>
                        
                        <!-- é›»æºå´ -->
                        <rect x="40" y="80" width="20" height="80" fill="#005BAB"/>
                        <text x="50" y="70" text-anchor="middle" font-size="14" font-weight="bold">é›»æº</text>
                        <text x="50" y="180" text-anchor="middle" font-size="12" id="source-voltage">200V</text>
                        
                        <!-- è² è·å´ -->
                        <rect x="540" y="80" width="20" height="80" fill="#FF961C"/>
                        <text x="550" y="70" text-anchor="middle" font-size="14" font-weight="bold">è² è·</text>
                        <text x="550" y="180" text-anchor="middle" font-size="12" id="load-voltage">194V</text>
                        
                        <!-- é›»åœ§é™ä¸‹ã®çŸ¢å° -->
                        <path d="M 50 120 Q 300 140 550 120" fill="none" stroke="#333" stroke-width="2" stroke-dasharray="5,5"/>
                        <text x="300" y="135" text-anchor="middle" font-size="16" font-weight="bold" id="voltage-drop-text">é›»åœ§é™ä¸‹: 6V (3%)</text>
                        
                        <!-- è¨±å®¹å€¤ãƒ©ã‚¤ãƒ³ -->
                        <line x1="50" y1="200" x2="550" y2="200" stroke="#F44336" stroke-width="2" stroke-dasharray="10,5"/>
                        <text x="300" y="215" text-anchor="middle" font-size="12" fill="#F44336">è¨±å®¹å€¤: 2% (4V)</text>
                    </svg>
                </div>
                
                <div class="result-box">
                    <h3>è¨ˆç®—çµæœ</h3>
                    <div class="formula" id="voltage-drop-formula">
                        e = 30.8 Ã— L Ã— I / (1000 Ã— A)
                    </div>
                    <p><strong>é›»åœ§é™ä¸‹:</strong> <span class="result-value" id="voltage-drop-result">6.0 V</span></p>
                    <p><strong>é›»åœ§é™ä¸‹ç‡:</strong> <span class="result-value" id="voltage-drop-percent">3.0 %</span></p>
                    <p><strong>åˆ¤å®š:</strong> <span id="voltage-drop-status">
                        <span class="status-indicator status-danger"></span>è¨±å®¹å€¤ã‚’è¶…ãˆã¦ã„ã¾ã™
                    </span></p>
                    
                    <div class="alert alert-info">
                        <p>ğŸ’¡ <strong>ãƒ’ãƒ³ãƒˆ:</strong> é›»åœ§é™ä¸‹ã‚’æ¸›ã‚‰ã™ã«ã¯ã€é›»ç·šã‚’å¤ªãã™ã‚‹ã‹ã€é›»ç·šé•·ã‚’çŸ­ãã—ã¾ã—ã‚‡ã†ã€‚</p>
                    </div>
                </div>
                
                <div class="card">
                    <h3>ğŸ“Š é›»ç·šã‚µã‚¤ã‚ºåˆ¥æ¯”è¼ƒ</h3>
                    <div class="comparison-container" id="cable-comparison">
                        <!-- JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
                    </div>
                </div>
                
                <div class="card" style="background: #f8f9fa;">
                    <h3>ğŸ“š å®Ÿç”¨çŸ¥è­˜ï¼šé›»åœ§é™ä¸‹ã®å®Ÿä¾‹</h3>
                    
                    <h4>ğŸ  å®¶åº­ã§ã®å®Ÿä¾‹</h4>
                    <div style="background: white; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                        <p><strong>ã‚¨ã‚¢ã‚³ãƒ³å°‚ç”¨å›è·¯ï¼ˆ200Vã€20Aã€é…ç·šé•·30mï¼‰ã®å ´åˆï¼š</strong></p>
                        <ul>
                            <li>VVF 2.0mmÂ²ä½¿ç”¨ï¼šé›»åœ§é™ä¸‹ = 5.3Vï¼ˆ2.7%ï¼‰â†’ <span style="color: #FF9800;">ã‚®ãƒªã‚®ãƒª</span></li>
                            <li>VVF 2.6mmÂ²ä½¿ç”¨ï¼šé›»åœ§é™ä¸‹ = 4.1Vï¼ˆ2.1%ï¼‰â†’ <span style="color: #4CAF50;">é©åˆ‡</span></li>
                            <li>VVF 1.6mmÂ²ä½¿ç”¨ï¼šé›»åœ§é™ä¸‹ = 6.7Vï¼ˆ3.4%ï¼‰â†’ <span style="color: #F44336;">ä¸é©åˆ‡</span></li>
                        </ul>
                        <p style="margin-top: 0.5rem;"><strong>çµè«–ï¼š</strong>å°‘ã—å¤ªã„é›»ç·šã‚’ä½¿ã†ã“ã¨ã§ã€ã‚¨ã‚¢ã‚³ãƒ³ã®åŠ¹ããŒè‰¯ããªã‚Šã€é›»æ°—ä»£ã‚‚ç¯€ç´„ã§ãã¾ã™ã€‚</p>
                    </div>
                    
                    <h4>ğŸ­ å·¥å ´ã§ã®å®Ÿä¾‹</h4>
                    <div style="background: white; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                        <p><strong>ãƒ¢ãƒ¼ã‚¿ãƒ¼ï¼ˆä¸‰ç›¸200Vã€50Aã€é…ç·šé•·100mï¼‰ã®å ´åˆï¼š</strong></p>
                        <ul>
                            <li>CVT 14mmÂ²ï¼šé›»åœ§é™ä¸‹ = 11.0Vï¼ˆ5.5%ï¼‰â†’ èµ·å‹•å›°é›£ã®å¯èƒ½æ€§</li>
                            <li>CVT 22mmÂ²ï¼šé›»åœ§é™ä¸‹ = 7.0Vï¼ˆ3.5%ï¼‰â†’ é€šå¸¸é‹è»¢OK</li>
                            <li>CVT 38mmÂ²ï¼šé›»åœ§é™ä¸‹ = 4.1Vï¼ˆ2.1%ï¼‰â†’ ç†æƒ³çš„</li>
                        </ul>
                        <p style="margin-top: 0.5rem;"><strong>æ³¨æ„ï¼š</strong>ãƒ¢ãƒ¼ã‚¿ãƒ¼èµ·å‹•æ™‚ã¯å®šæ ¼ã®6å€ç¨‹åº¦ã®é›»æµãŒæµã‚Œã‚‹ãŸã‚ã€ä½™è£•ã‚’æŒã£ãŸè¨­è¨ˆãŒå¿…è¦ã§ã™ã€‚</p>
                    </div>
                    
                    <h4>âš¡ é›»åœ§é™ä¸‹ã«ã‚ˆã‚‹å…·ä½“çš„ãªå½±éŸ¿</h4>
                    <table style="width: 100%; margin: 1rem 0;">
                        <thead>
                            <tr style="background: var(--primary-color); color: white;">
                                <th style="padding: 0.5rem;">é›»åœ§é™ä¸‹ç‡</th>
                                <th style="padding: 0.5rem;">å½±éŸ¿</th>
                                <th style="padding: 0.5rem;">å¯¾ç­–</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">1%ä»¥å†…</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">ã»ã¼å½±éŸ¿ãªã—</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">ç†æƒ³çš„ãªè¨­è¨ˆ</td>
                            </tr>
                            <tr style="background: #f5f5f5;">
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">2%ç¨‹åº¦</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">ã‚ãšã‹ãªåŠ¹ç‡ä½ä¸‹</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">è¨±å®¹ç¯„å›²å†…</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">3ï½5%</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">æ©Ÿå™¨ã®æ€§èƒ½ä½ä¸‹ã€ç™ºç†±å¢—åŠ </td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">é›»ç·šã‚µã‚¤ã‚ºã‚¢ãƒƒãƒ—æ¨å¥¨</td>
                            </tr>
                            <tr style="background: #f5f5f5;">
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">5%ä»¥ä¸Š</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">èµ·å‹•ä¸è‰¯ã€æ•…éšœã®åŸå› </td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">è¨­è¨ˆè¦‹ç›´ã—å¿…è¦</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="card" style="background: #f8f9fa;">
                    <h3>ğŸ“š å®Ÿç”¨çŸ¥è­˜ï¼šè¨±å®¹é›»æµã®å®Ÿä¾‹</h3>
                    
                    <h4>ğŸ  å®¶åº­ã§ã®é…ç·šé¸å®šä¾‹</h4>
                    <div style="background: white; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                        <table style="width: 100%;">
                            <thead>
                                <tr style="background: #e0e0e0;">
                                    <th style="padding: 0.5rem;">ç”¨é€”</th>
                                    <th style="padding: 0.5rem;">æƒ³å®šé›»æµ</th>
                                    <th style="padding: 0.5rem;">æ¨å¥¨é›»ç·š</th>
                                    <th style="padding: 0.5rem;">ç†ç”±</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="padding: 0.5rem;">ç…§æ˜å›è·¯</td>
                                    <td style="padding: 0.5rem;">10Aç¨‹åº¦</td>
                                    <td style="padding: 0.5rem;">VVF 1.6mmÂ²</td>
                                    <td style="padding: 0.5rem;">è¨±å®¹19A > ä½¿ç”¨10A âœ“</td>
                                </tr>
                                <tr style="background: #f5f5f5;">
                                    <td style="padding: 0.5rem;">ã‚³ãƒ³ã‚»ãƒ³ãƒˆå›è·¯</td>
                                    <td style="padding: 0.5rem;">15Aï¼ˆ1500Wï¼‰</td>
                                    <td style="padding: 0.5rem;">VVF 2.0mmÂ²</td>
                                    <td style="padding: 0.5rem;">è¨±å®¹27A > ä½¿ç”¨15A âœ“</td>
                                </tr>
                                <tr>
                                    <td style="padding: 0.5rem;">ã‚¨ã‚¢ã‚³ãƒ³å°‚ç”¨</td>
                                    <td style="padding: 0.5rem;">20A</td>
                                    <td style="padding: 0.5rem;">VVF 2.0mmÂ²ä»¥ä¸Š</td>
                                    <td style="padding: 0.5rem;">å°‚ç”¨å›è·¯ã§ä½™è£•å¿…è¦</td>
                                </tr>
                                <tr style="background: #f5f5f5;">
                                    <td style="padding: 0.5rem;">IHã‚¯ãƒƒã‚­ãƒ³ã‚°</td>
                                    <td style="padding: 0.5rem;">30Aï¼ˆ200Vï¼‰</td>
                                    <td style="padding: 0.5rem;">VVF 2.6mmÂ²ä»¥ä¸Š</td>
                                    <td style="padding: 0.5rem;">å¤§é›»æµã®ãŸã‚å¤ªç·šå¿…è¦</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <h4>âš ï¸ ã‚ˆãã‚ã‚‹é–“é•ã„ã¨å±é™ºæ€§</h4>
                    <div class="alert alert-danger">
                        <h5>ğŸ”¥ å±é™ºãªä¾‹</h5>
                        <ul>
                            <li><strong>å»¶é•·ã‚³ãƒ¼ãƒ‰ã®å¤šé‡æ¥ç¶š</strong>ï¼šå®šæ ¼ã‚’è¶…ãˆã‚„ã™ãç«ç½ã®åŸå› ã«</li>
                            <li><strong>å¤ã„é…ç·šã§ã®å¤§é›»åŠ›æ©Ÿå™¨ä½¿ç”¨</strong>ï¼šæ˜”ã®é…ç·šã¯ç´°ã„ï¼ˆ1.6mmÂ²ï¼‰ã“ã¨ãŒå¤šã„</li>
                            <li><strong>æŸã­é…ç·šã§ã®ä½¿ç”¨</strong>ï¼šæ”¾ç†±ã§ããšè¨±å®¹é›»æµãŒå¤§å¹…ã«ä½ä¸‹</li>
                        </ul>
                    </div>
                    
                    <h4>ğŸŒ¡ï¸ æ¸©åº¦ã«ã‚ˆã‚‹è¨±å®¹é›»æµã®å¤‰åŒ–</h4>
                    <div style="background: white; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                        <p><strong>VVF 2.0mmÂ²ï¼ˆåŸºæº–30â„ƒã§27Aï¼‰ã®å ´åˆï¼š</strong></p>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 1rem 0;">
                            <div style="background: #E3F2FD; padding: 0.5rem; border-radius: 8px;">
                                <strong>20â„ƒç’°å¢ƒ</strong><br>
                                è¨±å®¹é›»æµï¼š29.7Aï¼ˆ+10%ï¼‰
                            </div>
                            <div style="background: #FFF3E0; padding: 0.5rem; border-radius: 8px;">
                                <strong>40â„ƒç’°å¢ƒ</strong><br>
                                è¨±å®¹é›»æµï¼š24.3Aï¼ˆ-10%ï¼‰
                            </div>
                            <div style="background: #FFEBEE; padding: 0.5rem; border-radius: 8px;">
                                <strong>50â„ƒç’°å¢ƒ</strong><br>
                                è¨±å®¹é›»æµï¼š21.6Aï¼ˆ-20%ï¼‰
                            </div>
                        </div>
                        <p><strong>æ³¨æ„ï¼š</strong>å¤©äº•è£ã‚„é…ç®¡å†…ã¯å¤å ´50â„ƒã‚’è¶…ãˆã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ï¼</p>
                    </div>
                    
                    <h4>ğŸ’¡ ãƒ—ãƒ­ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹</h4>
                    <div class="alert alert-success">
                        <ul>
                            <li><strong>å°†æ¥ã‚’è¦‹æ®ãˆãŸè¨­è¨ˆ</strong>ï¼šå¾Œã‹ã‚‰å¤ªãã™ã‚‹ã®ã¯å›°é›£ã€‚æœ€åˆã‹ã‚‰ä½™è£•ã‚’æŒã¤</li>
                            <li><strong>80%ãƒ«ãƒ¼ãƒ«</strong>ï¼šè¨±å®¹é›»æµã®80%ä»¥ä¸‹ã§ä½¿ç”¨ã™ã‚Œã°å®‰å¿ƒ</li>
                            <li><strong>ãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼ã¨ã®å”èª¿</strong>ï¼šé›»ç·šã®è¨±å®¹é›»æµ > ãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼å®¹é‡ã«ã™ã‚‹</li>
                            <li><strong>å®šæœŸçš„ãªç‚¹æ¤œ</strong>ï¼šã‚³ãƒ³ã‚»ãƒ³ãƒˆãŒç†±ã„å ´åˆã¯è¦æ³¨æ„</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- é›»ç·šã®è¨±å®¹é›»æµã‚¿ãƒ– -->
        <div id="allowable-current" class="tab-content">
            <div class="card">
                <h2>âš¡ é›»ç·šã®è¨±å®¹é›»æµãƒã‚§ãƒƒã‚«ãƒ¼</h2>
                
                <div class="alert alert-info" style="margin-bottom: 1.5rem;">
                    <h4>ğŸ” è¨±å®¹é›»æµã¨ã¯ï¼Ÿ</h4>
                    <p><strong>é›»ç·šã«å®‰å…¨ã«æµã›ã‚‹æœ€å¤§é›»æµã®ã“ã¨ã§ã™ã€‚ã“ã‚Œã‚’è¶…ãˆã‚‹ã¨...</strong></p>
                    <ul style="margin: 0.5rem 0;">
                        <li>é›»ç·šãŒç™ºç†±ã—ã€è¢«è¦†ãŒæº¶ã‘ã‚‹å±é™º</li>
                        <li>æœ€æ‚ªã®å ´åˆã€ç«ç½ã®åŸå› ã«</li>
                        <li>é›»ç·šã®å¯¿å‘½ãŒè‘—ã—ãçŸ­ããªã‚‹</li>
                    </ul>
                    
                    <h5 style="margin-top: 1rem;">ğŸ“Š è¨±å®¹é›»æµã‚’æ±ºã‚ã‚‹è¦å› </h5>
                    <table style="width: 100%; margin: 0.5rem 0;">
                        <tr>
                            <td style="padding: 0.5rem;"><strong>é›»ç·šã®å¤ªã•</strong></td>
                            <td style="padding: 0.5rem;">å¤ªã„ã»ã©å¤šãã®é›»æµãŒæµã›ã‚‹</td>
                        </tr>
                        <tr style="background: #f5f5f5;">
                            <td style="padding: 0.5rem;"><strong>çµ¶ç¸ææ–™</strong></td>
                            <td style="padding: 0.5rem;">è€ç†±æ€§ãŒé«˜ã„ã»ã©è¨±å®¹é›»æµå¤§</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.5rem;"><strong>å¸ƒè¨­æ¡ä»¶</strong></td>
                            <td style="padding: 0.5rem;">æ”¾ç†±ã—ã‚„ã™ã„ç’°å¢ƒã»ã©æœ‰åˆ©</td>
                        </tr>
                        <tr style="background: #f5f5f5;">
                            <td style="padding: 0.5rem;"><strong>å‘¨å›²æ¸©åº¦</strong></td>
                            <td style="padding: 0.5rem;">æ¸©åº¦ãŒé«˜ã„ã¨è¨±å®¹é›»æµã¯æ¸›å°‘</td>
                        </tr>
                    </table>
                    
                    <h5 style="margin-top: 1rem;">âš ï¸ å®‰å…¨ç‡ã®è€ƒãˆæ–¹</h5>
                    <p><strong>ä½¿ç”¨ç‡80%ä»¥ä¸‹ã‚’æ¨å¥¨ã™ã‚‹ç†ç”±ï¼š</strong></p>
                    <ul style="margin: 0.5rem 0;">
                        <li>å°†æ¥ã®è² è·å¢—åŠ ã«å¯¾å¿œã§ãã‚‹ä½™è£•</li>
                        <li>çªå…¥é›»æµï¼ˆèµ·å‹•æ™‚ã®å¤§é›»æµï¼‰ã¸ã®å¯¾å¿œ</li>
                        <li>é›»ç·šã®é•·å¯¿å‘½åŒ–ï¼ˆç™ºç†±ã«ã‚ˆã‚‹åŠ£åŒ–ã‚’æŠ‘åˆ¶ï¼‰</li>
                        <li>ç•°å¸¸æ™‚ã®å®‰å…¨ãƒãƒ¼ã‚¸ãƒ³ç¢ºä¿</li>
                    </ul>
                </div>
                
                <div class="control-group">
                    <label class="control-label">é›»ç·šç¨®é¡</label>
                    <select id="cable-type" onchange="updateAllowableCurrent()">
                        <option value="vvf">VVFï¼ˆå¹³å½¢ãƒ“ãƒ‹ãƒ«çµ¶ç¸é›»ç·šï¼‰</option>
                        <option value="iv">IVï¼ˆ600Vãƒ“ãƒ‹ãƒ«çµ¶ç¸é›»ç·šï¼‰</option>
                        <option value="cv">CVï¼ˆæ¶æ©‹ãƒãƒªã‚¨ãƒãƒ¬ãƒ³çµ¶ç¸é›»ç·šï¼‰</option>
                        <option value="cvt">CVTï¼ˆãƒˆãƒªãƒ—ãƒ¬ãƒƒã‚¯ã‚¹å½¢ï¼‰</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label class="control-label">é›»ç·šã‚µã‚¤ã‚º</label>
                    <select id="cable-size-ac" onchange="updateAllowableCurrent()">
                        <option value="1.6">1.6 mmÂ²</option>
                        <option value="2.0">2.0 mmÂ²</option>
                        <option value="2.6">2.6 mmÂ²</option>
                        <option value="5.5">5.5 mmÂ²</option>
                        <option value="8">8.0 mmÂ²</option>
                        <option value="14">14 mmÂ²</option>
                        <option value="22">22 mmÂ²</option>
                        <option value="38">38 mmÂ²</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label class="control-label">å¸ƒè¨­æ¡ä»¶</label>
                    <select id="installation-type" onchange="updateAllowableCurrent()">
                        <option value="air">æ°—ä¸­å¸ƒè¨­ï¼ˆå˜ç‹¬ï¼‰</option>
                        <option value="conduit">é›»ç·šç®¡å†…å¸ƒè¨­</option>
                        <option value="bundle">ãŸã°ã­å¸ƒè¨­</option>
                        <option value="buried">åœ°ä¸­åŸ‹è¨­</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label class="control-label">å‘¨å›²æ¸©åº¦</label>
                    <div class="slider-container">
                        <input type="range" id="ambient-temp" min="20" max="50" value="30" step="5" onchange="updateAllowableCurrent()">
                        <span class="value-display" id="ambient-temp-value">30Â°C</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <label class="control-label">ä½¿ç”¨é›»æµ (A)</label>
                    <div class="slider-container">
                        <input type="range" id="actual-current" min="0" max="100" value="25" step="1" onchange="updateAllowableCurrent()">
                        <span class="value-display" id="actual-current-value">25A</span>
                    </div>
                </div>
                
                <div class="svg-container">
                    <svg width="600" height="400" viewBox="0 0 600 400">
                        <!-- è¨±å®¹é›»æµã®ã‚²ãƒ¼ã‚¸è¡¨ç¤º -->
                        <defs>
                            <linearGradient id="gaugeGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:#4CAF50;stop-opacity:1" />
                                <stop offset="50%" style="stop-color:#FFC107;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#F44336;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        
                        <!-- ã‚²ãƒ¼ã‚¸èƒŒæ™¯ -->
                        <path d="M 100 250 A 150 150 0 0 1 500 250" fill="none" stroke="#e0e0e0" stroke-width="30"/>
                        <path d="M 100 250 A 150 150 0 0 1 500 250" fill="none" stroke="url(#gaugeGradient)" stroke-width="25" stroke-dasharray="0 628" id="gauge-fill"/>
                        
                        <!-- ç›®ç››ã‚Š -->
                        <g id="gauge-ticks">
                            <!-- JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
                        </g>
                        
                        <!-- ä¸­å¿ƒè¡¨ç¤º -->
                        <text x="300" y="200" text-anchor="middle" font-size="48" font-weight="bold" id="current-percent">75%</text>
                        <text x="300" y="230" text-anchor="middle" font-size="16">ä½¿ç”¨ç‡</text>
                        
                        <!-- è¨±å®¹é›»æµè¡¨ç¤º -->
                        <text x="300" y="280" text-anchor="middle" font-size="14">è¨±å®¹é›»æµ: <tspan font-weight="bold" id="allowable-current-value">35A</tspan></text>
                        <text x="300" y="300" text-anchor="middle" font-size="14">ä½¿ç”¨é›»æµ: <tspan font-weight="bold" id="used-current-value">25A</tspan></text>
                    </svg>
                </div>
                
                <div class="result-box">
                    <h3>å®‰å…¨æ€§åˆ¤å®š</h3>
                    <p><strong>è¨±å®¹é›»æµ:</strong> <span class="result-value" id="allowable-current">35 A</span></p>
                    <p><strong>ä½¿ç”¨ç‡:</strong> <span class="result-value" id="usage-percent">71.4 %</span></p>
                    <p><strong>åˆ¤å®š:</strong> <span id="current-status">
                        <span class="status-indicator status-good"></span>å®‰å…¨ã«ä½¿ç”¨ã§ãã¾ã™
                    </span></p>
                    
                    <div class="alert alert-warning">
                        <p>âš ï¸ <strong>æ³¨æ„:</strong> ä½¿ç”¨ç‡ã¯80%ä»¥ä¸‹ã«ä¿ã¤ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚</p>
                    </div>
                </div>
                
                <div class="card">
                    <h3>ğŸ“‹ è¨±å®¹é›»æµä¸€è¦§è¡¨</h3>
                    <p style="font-size: 0.9rem; color: #666; margin-bottom: 1rem;">
                        â€» ãƒ‡ãƒ¼ã‚¿ã¯é›»æ°—è¨­å‚™æŠ€è¡“åŸºæº–ã®è§£é‡ˆãŠã‚ˆã³å„ãƒ¡ãƒ¼ã‚«ãƒ¼ã‚«ã‚¿ãƒ­ã‚°ã‚’å‚è€ƒã«ã—ãŸæ¨™æº–å€¤ã§ã™ã€‚<br>
                        å®Ÿéš›ã®æ–½å·¥ã§ã¯å¿…ãšæœ€æ–°ã®è¦æ ¼ãƒ»åŸºæº–ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
                    </p>
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: var(--primary-color); color: white;">
                                <th style="padding: 0.75rem; text-align: left;">ã‚µã‚¤ã‚º (mmÂ²)</th>
                                <th style="padding: 0.75rem; text-align: center;">æ°—ä¸­å¸ƒè¨­</th>
                                <th style="padding: 0.75rem; text-align: center;">ç®¡å†…å¸ƒè¨­</th>
                                <th style="padding: 0.75rem; text-align: center;">ãŸã°ã­å¸ƒè¨­</th>
                            </tr>
                        </thead>
                        <tbody id="allowable-current-table">
                            <!-- JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- é…é›»æ–¹å¼æ¯”è¼ƒã‚¿ãƒ– -->
        <div id="distribution-system" class="tab-content">
            <div class="card">
                <h2>ğŸ”Œ é…é›»æ–¹å¼ã®è©³ç´°è§£èª¬</h2>
                
                <div class="alert alert-info" style="margin-bottom: 1.5rem;">
                    <h4>ğŸ” é…é›»æ–¹å¼ã®åŸºæœ¬ç†è§£</h4>
                    <p><strong>é›»æ°—ã‚’é€ã‚‹æ–¹æ³•ã«ã¯ä¸»ã«3ã¤ã®æ–¹å¼ãŒã‚ã‚Šã¾ã™ï¼š</strong></p>
                    
                    <table style="width: 100%; margin: 1rem 0; border-collapse: collapse;">
                        <thead>
                            <tr style="background: var(--primary-color); color: white;">
                                <th style="padding: 0.75rem; border: 1px solid #ddd;">æ–¹å¼</th>
                                <th style="padding: 0.75rem; border: 1px solid #ddd;">é›»ç·šæ•°</th>
                                <th style="padding: 0.75rem; border: 1px solid #ddd;">ä¸»ãªç”¨é€”</th>
                                <th style="padding: 0.75rem; border: 1px solid #ddd;">ç‰¹å¾´</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;"><strong>å˜ç›¸2ç·šå¼</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">2æœ¬</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">å°è¦æ¨¡ãƒ»ä½é›»åŠ›</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">ã‚·ãƒ³ãƒ—ãƒ«ã€å®‰ä¾¡</td>
                            </tr>
                            <tr style="background: #f5f5f5;">
                                <td style="padding: 0.5rem; border: 1px solid #ddd;"><strong>å˜ç›¸3ç·šå¼</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">3æœ¬</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">ä¸€èˆ¬ä½å®…</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">100V/200Vä¸¡ç”¨</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;"><strong>ä¸‰ç›¸3ç·šå¼</strong></td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">3æœ¬</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">å·¥æ¥­ãƒ»å¤§é›»åŠ›</td>
                                <td style="padding: 0.5rem; border: 1px solid #ddd;">é«˜åŠ¹ç‡ã€ãƒ¢ãƒ¼ã‚¿ãƒ¼å‘ã‘</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <h5 style="margin-top: 1rem;">ğŸ’¡ é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ</h5>
                    <ul style="margin: 0.5rem 0;">
                        <li><strong>é›»ç·šæ•°ã¨é€é›»èƒ½åŠ›ã¯æ¯”ä¾‹ã—ãªã„</strong>ï¼šä¸‰ç›¸ã¯3æœ¬ã§âˆš3å€ï¼ˆç´„1.73å€ï¼‰ã®é›»åŠ›</li>
                        <li><strong>é›»åœ§ã®ç¨®é¡</strong>ï¼šæ—¥æœ¬ã§ã¯100Vã€200Vã€400Vï¼ˆç‰¹æ®Šç”¨é€”ï¼‰ãŒä¸»æµ</li>
                        <li><strong>å‘¨æ³¢æ•°ã®é•ã„</strong>ï¼šæ±æ—¥æœ¬50Hzã€è¥¿æ—¥æœ¬60Hzï¼ˆé™å²¡çœŒå¯Œå£«å·ãŒå¢ƒç•Œï¼‰</li>
                        <li><strong>å¥‘ç´„ç¨®åˆ¥</strong>ï¼šå¾“é‡é›»ç¯ï¼ˆå®¶åº­ç”¨ï¼‰ã¨å‹•åŠ›ï¼ˆå·¥æ¥­ç”¨ï¼‰ã§æ–™é‡‘ä½“ç³»ãŒç•°ãªã‚‹</li>
                    </ul>
                </div>
                

                
                <div class="comparison-container">
                    <div class="comparison-item" style="border: 2px solid #4CAF50;">
                        <h4>ğŸ  å˜ç›¸2ç·šå¼</h4>
                        <div class="svg-container">
                            <svg width="250" height="200" viewBox="0 0 250 200">
                                <!-- é›»æº -->
                                <rect x="20" y="60" width="40" height="80" fill="#005BAB"/>
                                <text x="40" y="50" text-anchor="middle" font-size="12" font-weight="bold">é›»æº</text>
                                
                                <!-- é…ç·š -->
                                <line x1="60" y1="80" x2="190" y2="80" stroke="#333" stroke-width="3"/>
                                <text x="125" y="75" text-anchor="middle" font-size="10">L (é›»åœ§ç·š)</text>
                                
                                <line x1="60" y1="120" x2="190" y2="120" stroke="#666" stroke-width="3"/>
                                <text x="125" y="135" text-anchor="middle" font-size="10">N (ä¸­æ€§ç·š)</text>
                                
                                <!-- è² è· -->
                                <rect x="190" y="60" width="40" height="80" fill="#FF961C"/>
                                <text x="210" y="50" text-anchor="middle" font-size="12" font-weight="bold">è² è·</text>
                                
                                <!-- é›»åœ§è¡¨ç¤º -->
                                <text x="125" y="160" text-anchor="middle" font-size="14" font-weight="bold">100V or 200V</text>
                            </svg>
                        </div>
                        

                        
                        <h5>ğŸ“‹ ç‰¹å¾´ã¨ç”¨é€”</h5>
                        <ul>
                            <li><strong>æ§‹æˆ:</strong> 2æœ¬ç·šï¼ˆL:ãƒ©ã‚¤ãƒ–ç·šã€N:ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ«ç·šï¼‰</li>
                            <li><strong>é›»åœ§:</strong> 100V ã¾ãŸã¯ 200Vï¼ˆã©ã¡ã‚‰ã‹ä¸€æ–¹ï¼‰</li>
                            <li><strong>å®Ÿéš›ã®ä½¿ç”¨ä¾‹:</strong>
                                <ul>
                                    <li>ã‚¢ãƒ‘ãƒ¼ãƒˆã®ç…§æ˜å›è·¯</li>
                                    <li>å°ã•ãªåº—èˆ—ã®é›»æº</li>
                                    <li>è¾²æ¥­ç”¨å°å±‹ã®é›»æº</li>
                                </ul>
                            </li>
                            <li><strong>ãƒ¡ãƒªãƒƒãƒˆ:</strong> 
                                <ul>
                                    <li>é…ç·šãŒã‚·ãƒ³ãƒ—ãƒ«ã§å·¥äº‹è²»ãŒå®‰ã„</li>
                                    <li>ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãŒç°¡å˜</li>
                                    <li>å°è¦æ¨¡ç”¨é€”ã«æœ€é©</li>
                                </ul>
                            </li>
                            <li><strong>ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ:</strong>
                                <ul>
                                    <li>å¤§ããªé›»åŠ›ã¯é€ã‚Œãªã„ï¼ˆæœ€å¤§3kWç¨‹åº¦ï¼‰</li>
                                    <li>100Vã¨200Vã‚’åŒæ™‚ã«ä½¿ãˆãªã„</li>
                                    <li>é›»åœ§é™ä¸‹ã®å½±éŸ¿ã‚’å—ã‘ã‚„ã™ã„</li>
                                </ul>
                            </li>
                        </ul>
                        
                        <div class="alert alert-warning">
                            <p>âš¡ <strong>å…·ä½“ä¾‹:</strong> 6ç•³é–“ã®ã‚¨ã‚¢ã‚³ãƒ³ï¼ˆ100Vã€10Aï¼‰ã¨ç…§æ˜ã‚’ä½¿ã†ã ã‘ãªã‚‰ååˆ†ã§ã™ãŒã€IHã‚¯ãƒƒã‚­ãƒ³ã‚°ãƒ’ãƒ¼ã‚¿ãƒ¼ã¯ä½¿ãˆã¾ã›ã‚“ã€‚</p>
                        </div>
                        
                        <div class="card" style="background: #f8f9fa; margin-top: 1rem;">
                            <h5>ğŸ”§ æŠ€è¡“çš„ãªè©³ç´°</h5>
                            <p><strong>ãªãœ2æœ¬ã®é›»ç·šãŒå¿…è¦ï¼Ÿ</strong></p>
                            <p>é›»æ°—ã¯ã€Œè¡Œãã€ã¨ã€Œå¸°ã‚Šã€ã®é“ãŒå¿…è¦ã§ã™ã€‚æ°´é“ã§ã„ãˆã°ã€è›‡å£ï¼ˆLç·šï¼‰ã¨æ’æ°´å£ï¼ˆNç·šï¼‰ã®ã‚ˆã†ãªé–¢ä¿‚ã§ã™ã€‚</p>
                            
                            <p style="margin-top: 0.5rem;"><strong>Lç·šã¨Nç·šã®é•ã„ï¼š</strong></p>
                            <ul>
                                <li><strong>Lç·šï¼ˆãƒ©ã‚¤ãƒ–ç·šï¼‰</strong>ï¼šé›»åœ§ãŒã‹ã‹ã£ã¦ã„ã‚‹å±é™ºãªç·šï¼ˆè§¦ã‚‹ã¨æ„Ÿé›»ï¼‰</li>
                                <li><strong>Nç·šï¼ˆãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ«ç·šï¼‰</strong>ï¼šå¤§åœ°ã¨åŒã˜é›»ä½ã§æ¯”è¼ƒçš„å®‰å…¨ï¼ˆãã‚Œã§ã‚‚è§¦ã‚‰ãªã„ï¼‰</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="comparison-item" style="border: 2px solid #2196F3;">
                        <h4>ğŸ˜ï¸ å˜ç›¸3ç·šå¼</h4>
                        <div class="svg-container">
                            <svg width="250" height="200" viewBox="0 0 250 200">
                                <!-- é›»æº -->
                                <rect x="20" y="40" width="40" height="120" fill="#005BAB"/>
                                <text x="40" y="30" text-anchor="middle" font-size="12" font-weight="bold">é›»æº</text>
                                
                                <!-- é…ç·š -->
                                <line x1="60" y1="60" x2="190" y2="60" stroke="#333" stroke-width="3"/>
                                <text x="125" y="55" text-anchor="middle" font-size="10">L1</text>
                                
                                <line x1="60" y1="100" x2="190" y2="100" stroke="#666" stroke-width="3"/>
                                <text x="125" y="95" text-anchor="middle" font-size="10">N</text>
                                
                                <line x1="60" y1="140" x2="190" y2="140" stroke="#333" stroke-width="3"/>
                                <text x="125" y="155" text-anchor="middle" font-size="10">L2</text>
                                
                                <!-- è² è· -->
                                <rect x="190" y="40" width="40" height="120" fill="#FF961C"/>
                                <text x="210" y="30" text-anchor="middle" font-size="12" font-weight="bold">è² è·</text>
                                
                                <!-- é›»åœ§è¡¨ç¤º -->
                                <text x="125" y="175" text-anchor="middle" font-size="12" font-weight="bold">100V/200Vä¸¡ç”¨</text>
                            </svg>
                        </div>
                        

                        
                        <h5>ğŸ“‹ ç‰¹å¾´ã¨ç”¨é€”</h5>
                        <ul>
                            <li><strong>æ§‹æˆ:</strong> 3æœ¬ç·šï¼ˆL1ã€N:ä¸­æ€§ç·šã€L2ï¼‰</li>
                            <li><strong>é›»åœ§:</strong> 
                                <ul>
                                    <li>L1-Né–“: 100Vï¼ˆãƒ†ãƒ¬ãƒ“ã€ç…§æ˜ç”¨ï¼‰</li>
                                    <li>L2-Né–“: 100Vï¼ˆå†·è”µåº«ã€æ´—æ¿¯æ©Ÿç”¨ï¼‰</li>
                                    <li>L1-L2é–“: 200Vï¼ˆã‚¨ã‚¢ã‚³ãƒ³ã€IHç”¨ï¼‰</li>
                                </ul>
                            </li>
                            <li><strong>å®Ÿéš›ã®ä½¿ç”¨ä¾‹:</strong>
                                <ul>
                                    <li>ä¸€èˆ¬çš„ãªæˆ¸å»ºã¦ä½å®…ï¼ˆã»ã¼100%ï¼‰</li>
                                    <li>ãƒãƒ³ã‚·ãƒ§ãƒ³ã®å„æˆ¸</li>
                                    <li>å°è¦æ¨¡äº‹å‹™æ‰€</li>
                                </ul>
                            </li>
                            <li><strong>ãƒ¡ãƒªãƒƒãƒˆ:</strong>
                                <ul>
                                    <li>100Vã¨200Vã‚’åŒæ™‚ã«ä½¿ãˆã‚‹</li>
                                    <li>é›»åŠ›ã®ãƒãƒ©ãƒ³ã‚¹ãŒå–ã‚Šã‚„ã™ã„</li>
                                    <li>å°†æ¥ã®å¢—è¨­ã«å¯¾å¿œã—ã‚„ã™ã„</li>
                                    <li>é›»ç·š3æœ¬ã§2å€ã®é›»åŠ›ãŒé€ã‚Œã‚‹ï¼ˆåŠ¹ç‡çš„ï¼‰</li>
                                </ul>
                            </li>
                            <li><strong>ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ:</strong>
                                <ul>
                                    <li>é…ç·šãŒã‚„ã‚„è¤‡é›‘</li>
                                    <li>L1ã¨L2ã®ãƒãƒ©ãƒ³ã‚¹ã‚’è€ƒæ…®ã™ã‚‹å¿…è¦ãŒã‚ã‚‹</li>
                                    <li>å·¥äº‹è²»ãŒ2ç·šå¼ã‚ˆã‚Šé«˜ã„</li>
                                </ul>
                            </li>
                        </ul>
                        
                        <div class="alert alert-success">
                            <p>ğŸ  <strong>å®¶åº­ã§ã®å®Ÿä¾‹:</strong><br>
                            - L1-Nï¼ˆ100Vï¼‰: ãƒªãƒ“ãƒ³ã‚°ã®ç…§æ˜ã€ãƒ†ãƒ¬ãƒ“ã€ãƒ‘ã‚½ã‚³ãƒ³<br>
                            - L2-Nï¼ˆ100Vï¼‰: å¯å®¤ã®ç…§æ˜ã€æ‰‡é¢¨æ©Ÿã€ã‚¹ãƒãƒ›å……é›»<br>
                            - L1-L2ï¼ˆ200Vï¼‰: ã‚¨ã‚¢ã‚³ãƒ³ã€IHã‚¯ãƒƒã‚­ãƒ³ã‚°ãƒ’ãƒ¼ã‚¿ãƒ¼ã€ã‚¨ã‚³ã‚­ãƒ¥ãƒ¼ãƒˆ</p>
                        </div>
                        
                        <div class="card" style="background: #f8f9fa; margin-top: 1rem;">
                            <h5>ğŸ”§ æŠ€è¡“çš„ãªè©³ç´°</h5>
                            <p><strong>ãªãœ3æœ¬ã§100Vã¨200VãŒä½¿ãˆã‚‹ï¼Ÿ</strong></p>
                            <p>ä¸­æ€§ç·šï¼ˆNï¼‰ã‚’ä¸­å¿ƒã«ã€L1ã¨L2ãŒé€†ä½ç›¸ï¼ˆ180åº¦ãšã‚ŒãŸï¼‰ã®é›»åœ§ã‚’æŒã£ã¦ã„ã‚‹ãŸã‚ã§ã™ã€‚</p>
                            
                            <div style="background: white; padding: 1rem; border-radius: 8px; margin: 0.5rem 0;">
                                <p><strong>é›»åœ§ã®é–¢ä¿‚ï¼š</strong></p>
                                <ul>
                                    <li>L1-Né–“ï¼š+100V</li>
                                    <li>L2-Né–“ï¼š-100Vï¼ˆL1ã¨é€†ä½ç›¸ï¼‰</li>
                                    <li>L1-L2é–“ï¼š100V - (-100V) = 200V</li>
                                </ul>
                            </div>
                            
                            <p style="margin-top: 1rem;"><strong>ãƒãƒ©ãƒ³ã‚¹ã®é‡è¦æ€§ï¼š</strong></p>
                            <p>L1å´ã¨L2å´ã®ä½¿ç”¨é›»åŠ›ãŒåã‚‹ã¨ã€ä¸­æ€§ç·šã«é›»æµãŒæµã‚Œã¦æå¤±ãŒå¢—ãˆã¾ã™ã€‚é›»æ°—å·¥äº‹å£«ã¯ä¸¡å´ã®ãƒãƒ©ãƒ³ã‚¹ã‚’è€ƒãˆã¦é…ç·šè¨­è¨ˆã—ã¾ã™ã€‚</p>
                        </div>
                    </div>
                    
                    <div class="comparison-item" style="border: 2px solid #FF5722;">
                        <h4>ğŸ­ ä¸‰ç›¸3ç·šå¼</h4>
                        <div class="svg-container">
                            <svg width="250" height="220" viewBox="0 0 250 220">
                                <!-- é›»æº -->
                                <rect x="20" y="40" width="40" height="120" fill="#005BAB"/>
                                <text x="40" y="30" text-anchor="middle" font-size="12" font-weight="bold">é›»æº</text>
                                
                                <!-- é…ç·š -->
                                <line x1="60" y1="60" x2="190" y2="60" stroke="#F44336" stroke-width="3"/>
                                <text x="125" y="55" text-anchor="middle" font-size="10">Rç›¸ï¼ˆèµ¤ï¼‰</text>
                                
                                <line x1="60" y1="100" x2="190" y2="100" stroke="#4CAF50" stroke-width="3"/>
                                <text x="125" y="95" text-anchor="middle" font-size="10">Sç›¸ï¼ˆç™½ï¼‰</text>
                                
                                <line x1="60" y1="140" x2="190" y2="140" stroke="#2196F3" stroke-width="3"/>
                                <text x="125" y="155" text-anchor="middle" font-size="10">Tç›¸ï¼ˆé’ï¼‰</text>
                                
                                <!-- è² è·ï¼ˆãƒ¢ãƒ¼ã‚¿ãƒ¼ï¼‰ -->
                                <circle cx="210" cy="100" r="35" fill="#FF961C" stroke="#333" stroke-width="2"/>
                                <text x="210" y="105" text-anchor="middle" font-size="16" font-weight="bold">M</text>
                                <text x="210" y="30" text-anchor="middle" font-size="12" font-weight="bold">ãƒ¢ãƒ¼ã‚¿ãƒ¼</text>
                                
                                <!-- é›»åœ§è¡¨ç¤º -->
                                <text x="125" y="175" text-anchor="middle" font-size="12" font-weight="bold">200V (ç·šé–“)</text>
                                
                                <!-- ä½ç›¸è¡¨ç¤º -->
                                <text x="125" y="195" text-anchor="middle" font-size="10">å„ç›¸120Â°ãšã¤ãšã‚Œã¦ã„ã‚‹</text>
                            </svg>
                        </div>
                        

                        
                        <h5>ğŸ“‹ ç‰¹å¾´ã¨ç”¨é€”</h5>
                        <ul>
                            <li><strong>æ§‹æˆ:</strong> 3æœ¬ç·šï¼ˆRç›¸ã€Sç›¸ã€Tç›¸ï¼‰å„ç›¸ã¯120Â°ä½ç›¸ãŒãšã‚Œã¦ã„ã‚‹</li>
                            <li><strong>é›»åœ§:</strong>
                                <ul>
                                    <li>ç·šé–“é›»åœ§: 200Vï¼ˆR-Sã€S-Tã€T-Ré–“ï¼‰</li>
                                    <li>ç›¸é›»åœ§: ç´„115Vï¼ˆä¸­æ€§ç‚¹ãŒã‚ã‚‹å ´åˆï¼‰</li>
                                </ul>
                            </li>
                            <li><strong>å®Ÿéš›ã®ä½¿ç”¨ä¾‹:</strong>
                                <ul>
                                    <li>å·¥å ´ã®ç”Ÿç”£ãƒ©ã‚¤ãƒ³</li>
                                    <li>ãƒ“ãƒ«ã®å¤§å‹ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼</li>
                                    <li>ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°ãƒ¢ãƒ¼ãƒ«ã®ç©ºèª¿ã‚·ã‚¹ãƒ†ãƒ </li>
                                    <li>é›»è»Šã®ãƒ¢ãƒ¼ã‚¿ãƒ¼</li>
                                    <li>å¤§å‹ãƒãƒ³ãƒ—ã€ã‚³ãƒ³ãƒ—ãƒ¬ãƒƒã‚µãƒ¼</li>
                                </ul>
                            </li>
                            <li><strong>ãƒ¡ãƒªãƒƒãƒˆ:</strong>
                                <ul>
                                    <li>åŒã˜é›»ç·šã‚µã‚¤ã‚ºã§âˆš3å€ï¼ˆç´„1.73å€ï¼‰ã®é›»åŠ›ãŒé€ã‚Œã‚‹</li>
                                    <li>ãƒ¢ãƒ¼ã‚¿ãƒ¼ãŒæ»‘ã‚‰ã‹ã«å›è»¢ã™ã‚‹</li>
                                    <li>é›»åŠ›ã®è„ˆå‹•ãŒå°‘ãªã„</li>
                                    <li>å¤§é›»åŠ›ã®é€é›»ã«æœ€é©</li>
                                </ul>
                            </li>
                            <li><strong>ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ:</strong>
                                <ul>
                                    <li>ä¸€èˆ¬å®¶åº­ã§ã¯ä½¿ãˆãªã„ï¼ˆå·¥æ¥­ç”¨ï¼‰</li>
                                    <li>é…ç·šãƒ»ä¿è­·è£…ç½®ãŒè¤‡é›‘</li>
                                    <li>æ„Ÿé›»æ™‚ã®å±é™ºæ€§ãŒé«˜ã„</li>
                                    <li>å°‚é–€çŸ¥è­˜ãŒå¿…è¦</li>
                                </ul>
                            </li>
                        </ul>
                        
                        <div class="alert alert-danger">
                            <p>âš ï¸ <strong>ãªãœãƒ¢ãƒ¼ã‚¿ãƒ¼ã«æœ€é©ï¼Ÿ</strong><br>
                            3ã¤ã®æ³¢ãŒé †ç•ªã«æ¥ã‚‹ã“ã¨ã§ã€ãƒ¢ãƒ¼ã‚¿ãƒ¼ã«é€£ç¶šçš„ã«åŠ›ãŒåŠ ã‚ã‚‹ãŸã‚ã€æŒ¯å‹•ãŒå°‘ãªãåŠ¹ç‡çš„ã«å›è»¢ã—ã¾ã™ã€‚å˜ç›¸ã ã¨åŠ›ã«è„ˆå‹•ãŒã‚ã‚ŠåŠ¹ç‡ãŒæ‚ªã„ã®ã§ã™ã€‚</p>
                        </div>
                        
                        <div class="card" style="background: #f8f9fa; margin-top: 1rem;">
                            <h5>ğŸ”§ æŠ€è¡“çš„ãªè©³ç´°</h5>
                            <p><strong>ãªãœâˆš3ï¼ˆ1.732ï¼‰å€ã®é›»åŠ›ï¼Ÿ</strong></p>
                            <p>3ã¤ã®é›»åœ§ãŒ120åº¦ãšã¤ãšã‚Œã¦ã„ã‚‹ãŸã‚ã€ãƒ™ã‚¯ãƒˆãƒ«è¨ˆç®—ã™ã‚‹ã¨âˆš3å€ã«ãªã‚Šã¾ã™ã€‚</p>
                            
                            <div style="background: white; padding: 1rem; border-radius: 8px; margin: 0.5rem 0;">
                                <p><strong>è¨ˆç®—ä¾‹ï¼ˆ200Vã€50Aï¼‰ï¼š</strong></p>
                                <ul>
                                    <li>å˜ç›¸ã®é›»åŠ›ï¼š200V Ã— 50A = 10kW</li>
                                    <li>ä¸‰ç›¸ã®é›»åŠ›ï¼šâˆš3 Ã— 200V Ã— 50A = 1.732 Ã— 10kW = <strong>17.32kW</strong></li>
                                    <li>ã¤ã¾ã‚Šã€åŒã˜é›»ç·šã§<strong>73%ã‚‚å¤šã</strong>ã®é›»åŠ›ãŒé€ã‚Œã‚‹ï¼</li>
                                </ul>
                            </div>
                            
                            <p style="margin-top: 1rem;"><strong>ä½ç›¸ã®ãšã‚Œã¨ã¯ï¼Ÿ</strong></p>
                            <p>3ã¤ã®é›»åœ§æ³¢å½¢ãŒæ™‚é–“çš„ã«120åº¦ï¼ˆ1/3å‘¨æœŸï¼‰ãšã¤ãšã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šï¼š</p>
                            <ul>
                                <li>ã©ã®ç¬é–“ã‚‚å¿…ãšã©ã‚Œã‹ã®ç›¸ãŒé«˜ã„é›»åœ§ã‚’æŒã¤</li>
                                <li>3ç›¸ã®åˆè¨ˆé›»æµã¯å¸¸ã«ã‚¼ãƒ­ï¼ˆãƒãƒ©ãƒ³ã‚¹æ™‚ï¼‰</li>
                                <li>ä¸­æ€§ç·šãŒä¸è¦ï¼ˆYçµç·šã®ä¸­æ€§ç‚¹ã¯é›»ä½ã‚¼ãƒ­ï¼‰</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="card" style="background: linear-gradient(135deg, #FFF9C4 0%, #FFECB3 100%); margin-top: 2rem;">
                    <h3>ğŸ“ é…é›»æ–¹å¼ã®é¸ã³æ–¹ã‚¬ã‚¤ãƒ‰</h3>
                    
                    <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                        <thead>
                            <tr style="background: var(--primary-color); color: white;">
                                <th style="padding: 1rem; text-align: left;">ä½¿ç”¨å ´æ‰€ãƒ»ç›®çš„</th>
                                <th style="padding: 1rem; text-align: center;">æ¨å¥¨æ–¹å¼</th>
                                <th style="padding: 1rem; text-align: left;">ç†ç”±</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="background: white;">
                                <td style="padding: 1rem; border: 1px solid #e0e0e0;">
                                    <strong>ãƒ¯ãƒ³ãƒ«ãƒ¼ãƒ ãƒãƒ³ã‚·ãƒ§ãƒ³</strong><br>
                                    <small>ç…§æ˜ã¨ã‚³ãƒ³ã‚»ãƒ³ãƒˆç¨‹åº¦</small>
                                </td>
                                <td style="padding: 1rem; border: 1px solid #e0e0e0; text-align: center;">
                                    <span style="background: #4CAF50; color: white; padding: 0.25rem 0.75rem; border-radius: 20px;">å˜ç›¸2ç·šå¼</span>
                                </td>
                                <td style="padding: 1rem; border: 1px solid #e0e0e0;">
                                    å¿…è¦é›»åŠ›ãŒå°ã•ãã€ã‚³ã‚¹ãƒˆã‚’æŠ‘ãˆã‚‰ã‚Œã‚‹
                                </td>
                            </tr>
                            <tr style="background: #f5f5f5;">
                                <td style="padding: 1rem; border: 1px solid #e0e0e0;">
                                    <strong>ä¸€èˆ¬ä½å®…</strong><br>
                                    <small>ã‚¨ã‚¢ã‚³ãƒ³ã€IHã€å®¶é›»å¤šæ•°</small>
                                </td>
                                <td style="padding: 1rem; border: 1px solid #e0e0e0; text-align: center;">
                                    <span style="background: #2196F3; color: white; padding: 0.25rem 0.75rem; border-radius: 20px;">å˜ç›¸3ç·šå¼</span>
                                </td>
                                <td style="padding: 1rem; border: 1px solid #e0e0e0;">
                                    100V/200Vä¸¡æ–¹ä½¿ãˆã€å°†æ¥ã®å¢—è¨­ã«ã‚‚å¯¾å¿œ
                                </td>
                            </tr>
                            <tr style="background: white;">
                                <td style="padding: 1rem; border: 1px solid #e0e0e0;">
                                    <strong>ç”ºå·¥å ´ãƒ»è£½é€ æ¥­</strong><br>
                                    <small>å¤§å‹æ©Ÿæ¢°ã€ãƒ¢ãƒ¼ã‚¿ãƒ¼å¤šæ•°</small>
                                </td>
                                <td style="padding: 1rem; border: 1px solid #e0e0e0; text-align: center;">
                                    <span style="background: #FF5722; color: white; padding: 0.25rem 0.75rem; border-radius: 20px;">ä¸‰ç›¸3ç·šå¼</span>
                                </td>
                                <td style="padding: 1rem; border: 1px solid #e0e0e0;">
                                    ãƒ¢ãƒ¼ã‚¿ãƒ¼åŠ¹ç‡ãŒè‰¯ãã€å¤§é›»åŠ›ã‚’æ‰±ãˆã‚‹
                                </td>
                            </tr>
                            <tr style="background: #f5f5f5;">
                                <td style="padding: 1rem; border: 1px solid #e0e0e0;">
                                    <strong>ã‚³ãƒ³ãƒ“ãƒ‹ãƒ»å°è¦æ¨¡åº—èˆ—</strong><br>
                                    <small>ç…§æ˜ã€å†·è”µåº«ã€ã‚¨ã‚¢ã‚³ãƒ³</small>
                                </td>
                                <td style="padding: 1rem; border: 1px solid #e0e0e0; text-align: center;">
                                    <span style="background: #2196F3; color: white; padding: 0.25rem 0.75rem; border-radius: 20px;">å˜ç›¸3ç·šå¼</span>
                                </td>
                                <td style="padding: 1rem; border: 1px solid #e0e0e0;">
                                    200Væ©Ÿå™¨ã‚‚ä½¿ãˆã€é›»æ°—æ–™é‡‘ã‚’æŠ‘ãˆã‚‰ã‚Œã‚‹
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="card">
                    <h3>ğŸ”„ é…é›»æ–¹å¼åˆ¥ã®å®Ÿç”¨è¨ˆç®—ãƒ„ãƒ¼ãƒ«</h3>
                    
                    <div class="control-group">
                        <label class="control-label">è¨ˆç®—ã—ãŸã„å†…å®¹</label>
                        <select id="calc-type" onchange="updateDistributionCalc()">
                            <option value="power">é€é›»å¯èƒ½é›»åŠ›ã®æ¯”è¼ƒ</option>
                            <option value="current">å¿…è¦ãªé›»æµå€¤ã®è¨ˆç®—</option>
                            <option value="efficiency">é€é›»åŠ¹ç‡ã®æ¯”è¼ƒ</option>
                            <option value="cost">æœˆé–“é›»æ°—æ–™é‡‘ã®è©¦ç®—</option>
                        </select>
                    </div>
                    
                    <div id="power-calc" class="calc-section">
                        <div class="control-group">
                            <label class="control-label">æ¯”è¼ƒã™ã‚‹é…é›»æ–¹å¼</label>
                            <select id="compare-distribution" onchange="compareDistribution()">
                                <option value="all">å…¨æ–¹å¼ã‚’æ¯”è¼ƒ</option>
                                <option value="single2">å˜ç›¸2ç·šå¼ã®ã¿</option>
                                <option value="single3">å˜ç›¸3ç·šå¼ã®ã¿</option>
                                <option value="three3">ä¸‰ç›¸3ç·šå¼ã®ã¿</option>
                            </select>
                        </div>
                        
                        <div class="control-group">
                            <label class="control-label">é›»åœ§ (V)</label>
                            <div class="slider-container">
                                <input type="range" id="compare-voltage" min="100" max="400" value="200" step="10" onchange="compareDistribution()">
                                <span class="value-display" id="compare-voltage-value">200V</span>
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <label class="control-label">é›»æµ (A)</label>
                            <div class="slider-container">
                                <input type="range" id="compare-current" min="10" max="100" value="50" step="5" onchange="compareDistribution()">
                                <span class="value-display" id="compare-current-value">50A</span>
                            </div>
                        </div>
                        
                        <div class="result-box">
                            <h4>é…é›»æ–¹å¼åˆ¥ã®é€é›»èƒ½åŠ›</h4>
                            <div id="distribution-comparison-result">
                                <!-- JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
                            </div>
                        </div>
                    </div>
                    
                    <div id="current-calc" class="calc-section" style="display: none;">
                        <div class="control-group">
                            <label class="control-label">å¿…è¦ãªé›»åŠ› (kW)</label>
                            <div class="slider-container">
                                <input type="range" id="required-power" min="1" max="50" value="10" step="1" onchange="calculateRequiredCurrent()">
                                <span class="value-display" id="required-power-value">10kW</span>
                            </div>
                        </div>
                        
                        <div class="result-box">
                            <h4>å„é…é›»æ–¹å¼ã§å¿…è¦ãªé›»æµå€¤</h4>
                            <div id="required-current-result">
                                <!-- JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
                            </div>
                        </div>
                    </div>
                    
                    <div id="efficiency-calc" class="calc-section" style="display: none;">
                        <div class="control-group">
                            <label class="control-label">é€é›»è·é›¢ (m)</label>
                            <div class="slider-container">
                                <input type="range" id="transmission-distance" min="10" max="500" value="100" step="10" onchange="calculateEfficiency()">
                                <span class="value-display" id="transmission-distance-value">100m</span>
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <label class="control-label">é€é›»é›»åŠ› (kW)</label>
                            <div class="slider-container">
                                <input type="range" id="transmission-power" min="1" max="50" value="10" step="1" onchange="calculateEfficiency()">
                                <span class="value-display" id="transmission-power-value">10kW</span>
                            </div>
                        </div>
                        
                        <div class="result-box">
                            <h4>é€é›»æå¤±ã®æ¯”è¼ƒ</h4>
                            <div id="efficiency-result">
                                <!-- JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
                            </div>
                        </div>
                    </div>
                    
                    <div id="cost-calc" class="calc-section" style="display: none;">
                        <div class="control-group">
                            <label class="control-label">ä½¿ç”¨é›»åŠ›é‡ (kWh/æœˆ)</label>
                            <div class="slider-container">
                                <input type="range" id="monthly-usage" min="100" max="1000" value="300" step="50" onchange="calculateCost()">
                                <span class="value-display" id="monthly-usage-value">300kWh</span>
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <label class="control-label">å¥‘ç´„é›»åŠ› (kW)</label>
                            <div class="slider-container">
                                <input type="range" id="contract-power" min="3" max="50" value="10" step="1" onchange="calculateCost()">
                                <span class="value-display" id="contract-power-value">10kW</span>
                            </div>
                        </div>
                        
                        <div class="result-box">
                            <h4>æœˆé–“é›»æ°—æ–™é‡‘ã®è©¦ç®—</h4>
                            <div id="cost-result">
                                <!-- JavaScriptã§å‹•çš„ã«ç”Ÿæˆ -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card" style="background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);">
                    <h3>ğŸ’¡ é…é›»æ–¹å¼ã®è±†çŸ¥è­˜</h3>
                    
                    <div class="alert alert-info">
                        <h4>ğŸ¤” ãªãœä¸‰ç›¸ã¯åŠ¹ç‡ãŒè‰¯ã„ã®ï¼Ÿ</h4>
                        <p>ä¸‰ç›¸äº¤æµã¯ã€3ã¤ã®æ³¢ãŒ120åº¦ãšã¤ãšã‚Œã¦é‡ãªã‚‹ã“ã¨ã§ã€é›»åŠ›ã®ã€Œè°·é–“ã€ãŒãªããªã‚Šã¾ã™ã€‚å˜ç›¸ã ã¨é›»åŠ›ã«è„ˆå‹•ï¼ˆå¼·å¼±ï¼‰ãŒã‚ã‚‹ãŸã‚ã€åŠ¹ç‡ãŒè½ã¡ã‚‹ã®ã§ã™ã€‚</p>
                    </div>
                    
                    <div class="alert alert-warning">
                        <h4>âš¡ å®¶åº­ã§ä¸‰ç›¸ã‚’ä½¿ã‚ãªã„ç†ç”±</h4>
                        <ul style="margin: 0.5rem 0;">
                            <li><strong>å®‰å…¨æ€§:</strong> ä¸‰ç›¸ã¯å¸¸ã«é›»åœ§ãŒã‹ã‹ã£ã¦ã„ã‚‹ãŸã‚ã€æ„Ÿé›»ãƒªã‚¹ã‚¯ãŒé«˜ã„</li>
                            <li><strong>å¿…è¦æ€§:</strong> å®¶åº­ç”¨æ©Ÿå™¨ã¯ãƒ¢ãƒ¼ã‚¿ãƒ¼ãŒå°ã•ãã€å˜ç›¸ã§ååˆ†</li>
                            <li><strong>ã‚³ã‚¹ãƒˆ:</strong> ä¸‰ç›¸ã®é…ç·šå·¥äº‹ã¯é«˜é¡ã§ã€ä¿è­·è£…ç½®ã‚‚è¤‡é›‘</li>
                            <li><strong>å¥‘ç´„:</strong> é›»åŠ›ä¼šç¤¾ã¨ã®å¥‘ç´„ãŒã€Œå‹•åŠ›ã€ã¨ãªã‚Šã€åŸºæœ¬æ–™é‡‘ãŒé«˜ã„</li>
                        </ul>
                    </div>
                    
                    <div class="alert alert-success">
                        <h4>ğŸ  å˜ç›¸3ç·šå¼ãŒå®¶åº­ã®æ¨™æº–ã«ãªã£ãŸç†ç”±</h4>
                        <p><strong>æ­´å²çš„èƒŒæ™¯:</strong> æ˜”ã¯100Vã®ã¿ã§ã—ãŸãŒã€ã‚¨ã‚¢ã‚³ãƒ³ã‚„IHãªã©200Væ©Ÿå™¨ãŒæ™®åŠã—ã€å˜ç›¸3ç·šå¼ãŒæ¨™æº–ã«ãªã‚Šã¾ã—ãŸã€‚ã‚¢ãƒ¡ãƒªã‚«ã§ã¯120V/240Vã€ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘ã§ã¯230Vå˜ç›¸ãŒä¸»æµãªã©ã€å›½ã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™ã€‚</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
        function showTab(tabId) {
            const tabs = document.querySelectorAll('.tab-content');
            const buttons = document.querySelectorAll('.tab-button');
            
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            buttons.forEach(button => {
                button.classList.remove('active');
            });
            
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }
        
        // ä¿å­˜ã•ã‚ŒãŸçµæœ
        let savedResults = [];
        
        // æ¯”è¼ƒãƒ‘ãƒãƒ«ã®è¡¨ç¤ºåˆ‡æ›¿
        function toggleComparisonPanel() {
            const panel = document.getElementById('comparison-panel');
            panel.classList.toggle('active');
        }
        
        // çµæœã‚’ä¿å­˜
        function saveResult(type, data) {
            const result = {
                id: Date.now(),
                type: type,
                timestamp: new Date().toLocaleString('ja-JP'),
                data: data
            };
            
            savedResults.push(result);
            updateSavedResults();
            
            // ä¿å­˜å®Œäº†ã®é€šçŸ¥
            showNotification('è¨ˆç®—çµæœã‚’ä¿å­˜ã—ã¾ã—ãŸ');
        }
        
        // ä¿å­˜çµæœã®è¡¨ç¤ºæ›´æ–°
        function updateSavedResults() {
            const container = document.getElementById('saved-results');
            
            if (savedResults.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #999;">ä¿å­˜ã•ã‚ŒãŸçµæœãŒã‚ã‚Šã¾ã›ã‚“</p>';
                return;
            }
            
            container.innerHTML = savedResults.map(result => `
                <div class="saved-result">
                    <button class="delete-result" onclick="deleteResult(${result.id})">å‰Šé™¤</button>
                    <h4>${result.type}</h4>
                    <p style="font-size: 0.8rem; color: #666;">${result.timestamp}</p>
                    <div style="margin-top: 0.5rem;">
                        ${formatResultData(result.type, result.data)}
                    </div>
                </div>
            `).join('');
        }
        
        // çµæœãƒ‡ãƒ¼ã‚¿ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
        function formatResultData(type, data) {
            switch(type) {
                case 'é›»åŠ›ã¨åŠ›ç‡':
                    return `
                        <p>æœ‰åŠ¹é›»åŠ›: ${data.activePower}</p>
                        <p>ç„¡åŠ¹é›»åŠ›: ${data.reactivePower}</p>
                        <p>çš®ç›¸é›»åŠ›: ${data.apparentPower}</p>
                        <p>åŠ›ç‡: ${data.powerFactor}</p>
                    `;
                case 'é›»åœ§é™ä¸‹':
                    return `
                        <p>é›»åœ§é™ä¸‹: ${data.drop}</p>
                        <p>é™ä¸‹ç‡: ${data.percent}</p>
                        <p>é›»ç·š: ${data.size}</p>
                        <p>é•·ã•: ${data.length}</p>
                    `;
                case 'è¨±å®¹é›»æµ':
                    return `
                        <p>è¨±å®¹é›»æµ: ${data.allowable}</p>
                        <p>ä½¿ç”¨é›»æµ: ${data.actual}</p>
                        <p>ä½¿ç”¨ç‡: ${data.usage}</p>
                        <p>é›»ç·š: ${data.type} ${data.size}</p>
                    `;
                default:
                    return '';
            }
        }
        
        // çµæœã‚’å‰Šé™¤
        function deleteResult(id) {
            savedResults = savedResults.filter(r => r.id !== id);
            updateSavedResults();
        }
        
        // é€šçŸ¥è¡¨ç¤º
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: var(--success-color);
                color: white;
                padding: 1rem 2rem;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                z-index: 2000;
                animation: slideDown 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
        }
        
        // é›»åŠ›ã¨åŠ›ç‡ã®è¨ˆç®—
        function updatePowerFactor() {
            const voltage = parseFloat(document.getElementById('voltage-pf').value);
            const current = parseFloat(document.getElementById('current-pf').value);
            const pf = parseFloat(document.getElementById('power-factor').value) / 100;
            
            // å€¤ã®æ›´æ–°
            document.getElementById('voltage-pf-value').textContent = voltage + 'V';
            document.getElementById('current-pf-value').textContent = current + 'A';
            document.getElementById('power-factor-value').textContent = pf.toFixed(2);
            
            // è¨ˆç®—
            const apparentPower = voltage * current;
            const activePower = apparentPower * pf;
            const reactivePower = apparentPower * Math.sqrt(1 - pf * pf);
            const phaseAngle = Math.acos(pf) * 180 / Math.PI;
            
            // çµæœè¡¨ç¤º
            document.getElementById('active-power').textContent = activePower.toLocaleString() + ' W';
            document.getElementById('reactive-power').textContent = reactivePower.toLocaleString() + ' var';
            document.getElementById('apparent-power').textContent = apparentPower.toLocaleString() + ' VA';
            document.getElementById('phase-angle').textContent = phaseAngle.toFixed(1) + 'Â°';
            
            // SVGã®æ›´æ–°
            updatePowerTriangle(activePower, reactivePower, apparentPower, phaseAngle);
        }
        
        function updatePowerTriangle(P, Q, S, angle) {
            // ä¸‰è§’å½¢ã®ã‚¹ã‚±ãƒ¼ãƒ«èª¿æ•´
            const scale = 300 / S * 10000; // 10kVAã‚’åŸºæº–
            const Px = Math.min(P * scale / 10000, 300);
            const Qy = Math.min(Q * scale / 10000, 100);
            
            // æœ‰åŠ¹é›»åŠ›ç·š
            const activeLine = document.querySelector('#triangle-group line:nth-child(1)');
            activeLine.setAttribute('x2', 100 + Px);
            
            // ç„¡åŠ¹é›»åŠ›ç·š
            const reactiveLine = document.querySelector('#triangle-group line:nth-child(3)');
            reactiveLine.setAttribute('x1', 100 + Px);
            reactiveLine.setAttribute('x2', 100 + Px);
            reactiveLine.setAttribute('y2', 300 - Qy);
            
            // çš®ç›¸é›»åŠ›ç·š
            const apparentLine = document.querySelector('#triangle-group line:nth-child(5)');
            apparentLine.setAttribute('x2', 100 + Px);
            apparentLine.setAttribute('y2', 300 - Qy);
            
            // ãƒ†ã‚­ã‚¹ãƒˆæ›´æ–°
            document.getElementById('active-power-text').textContent = Math.round(P) + 'W';
            document.getElementById('reactive-power-text').textContent = Math.round(Q) + 'var';
            document.getElementById('apparent-power-text').textContent = Math.round(S) + 'VA';
            document.getElementById('angle-text').textContent = 'Î¸=' + angle.toFixed(1) + 'Â°';
        }
        
        // é€²ç›¸ã‚³ãƒ³ãƒ‡ãƒ³ã‚µè¨ˆç®—
        function calculateCapacitor() {
            const voltage = parseFloat(document.getElementById('voltage-pf').value);
            const current = parseFloat(document.getElementById('current-pf').value);
            const currentPF = parseFloat(document.getElementById('power-factor').value) / 100;
            const targetPF = parseFloat(document.getElementById('target-pf').value) / 100;
            
            document.getElementById('target-pf-value').textContent = targetPF.toFixed(2);
            
            const P = voltage * current * currentPF;
            const currentAngle = Math.acos(currentPF);
            const targetAngle = Math.acos(targetPF);
            
            const Qc = P * (Math.tan(currentAngle) - Math.tan(targetAngle));
            
            const currentReduction = (1 - targetPF / currentPF) * 100;
            const costReduction = (targetPF - currentPF) * 100;
            const lossReduction = (1 - Math.pow(targetPF / currentPF, 2)) * 100;
            
            document.getElementById('capacitor-kvar').textContent = (Qc / 1000).toFixed(1) + ' kvar';
            document.getElementById('current-reduction').textContent = currentReduction.toFixed(1) + '%';
            document.getElementById('cost-reduction').textContent = 'ç´„' + costReduction.toFixed(0) + '%';
            document.getElementById('loss-reduction').textContent = 'ç´„' + lossReduction.toFixed(0) + '%';
        }
        
        // é›»åŠ›ã¨åŠ›ç‡ã®çµæœã‚’ä¿å­˜
        function savePowerFactorResult() {
            const data = {
                activePower: document.getElementById('active-power').textContent,
                reactivePower: document.getElementById('reactive-power').textContent,
                apparentPower: document.getElementById('apparent-power').textContent,
                powerFactor: document.getElementById('power-factor-value').textContent
            };
            saveResult('é›»åŠ›ã¨åŠ›ç‡', data);
        }
        
        // é›»åœ§é™ä¸‹è¨ˆç®—
        function updateVoltageDrop() {
            const type = document.getElementById('distribution-type').value;
            const length = parseFloat(document.getElementById('cable-length').value);
            const current = parseFloat(document.getElementById('current-vd').value);
            const size = parseFloat(document.getElementById('cable-size').value);
            
            // å€¤ã®æ›´æ–°
            document.getElementById('cable-length-value').textContent = length + 'm';
            document.getElementById('current-vd-value').textContent = current + 'A';
            
            // ä¿‚æ•°è¨­å®š
            let k;
            switch(type) {
                case 'single2':
                    k = 35.6; // 2å€
                    document.getElementById('voltage-drop-formula').textContent = 'e = 35.6 Ã— L Ã— I / (1000 Ã— A)';
                    break;
                case 'single3':
                    k = 17.8;
                    document.getElementById('voltage-drop-formula').textContent = 'e = 17.8 Ã— L Ã— I / (1000 Ã— A)';
                    break;
                case 'three3':
                    k = 30.8;
                    document.getElementById('voltage-drop-formula').textContent = 'e = 30.8 Ã— L Ã— I / (1000 Ã— A)';
                    break;
            }
            
            // é›»åœ§é™ä¸‹è¨ˆç®—
            const voltageDrop = k * length * current / (1000 * size);
            const baseVoltage = type === 'single2' ? 100 : 200;
            const dropPercent = voltageDrop / baseVoltage * 100;
            
            // çµæœè¡¨ç¤º
            document.getElementById('voltage-drop-result').textContent = voltageDrop.toFixed(1) + ' V';
            document.getElementById('voltage-drop-percent').textContent = dropPercent.toFixed(1) + ' %';
            
            // SVGæ›´æ–°
            document.getElementById('source-voltage').textContent = baseVoltage + 'V';
            document.getElementById('load-voltage').textContent = (baseVoltage - voltageDrop).toFixed(0) + 'V';
            document.getElementById('voltage-drop-text').textContent = 'é›»åœ§é™ä¸‹: ' + voltageDrop.toFixed(1) + 'V (' + dropPercent.toFixed(1) + '%)';
            
            // åˆ¤å®š
            const statusElement = document.getElementById('voltage-drop-status');
            if (dropPercent <= 2) {
                statusElement.innerHTML = '<span class="status-indicator status-good"></span>è¨±å®¹å€¤å†…ã§ã™';
            } else if (dropPercent <= 3) {
                statusElement.innerHTML = '<span class="status-indicator status-warning"></span>æ³¨æ„ãŒå¿…è¦ã§ã™';
            } else {
                statusElement.innerHTML = '<span class="status-indicator status-danger"></span>è¨±å®¹å€¤ã‚’è¶…ãˆã¦ã„ã¾ã™';
            }
            
            // é›»ç·šã‚µã‚¤ã‚ºæ¯”è¼ƒæ›´æ–°
            updateCableComparison(type, length, current);
        }
        
        function updateCableComparison(type, length, current) {
            const sizes = [1.6, 2.0, 2.6, 5.5, 8.0, 14, 22, 38];
            const comparison = document.getElementById('cable-comparison');
            comparison.innerHTML = '';
            
            let k;
            switch(type) {
                case 'single2': k = 35.6; break;
                case 'single3': k = 17.8; break;
                case 'three3': k = 30.8; break;
            }
            
            const baseVoltage = type === 'single2' ? 100 : 200;
            
            sizes.forEach(size => {
                const drop = k * length * current / (1000 * size);
                const percent = drop / baseVoltage * 100;
                
                let status, statusClass;
                if (percent <= 2) {
                    status = 'æ¨å¥¨';
                    statusClass = 'status-good';
                } else if (percent <= 3) {
                    status = 'ä½¿ç”¨å¯';
                    statusClass = 'status-warning';
                } else {
                    status = 'ä¸é©';
                    statusClass = 'status-danger';
                }
                
                const item = document.createElement('div');
                item.className = 'comparison-item';
                item.innerHTML = `
                    <h4>${size} mmÂ²</h4>
                    <p>é›»åœ§é™ä¸‹: ${drop.toFixed(1)}V (${percent.toFixed(1)}%)</p>
                    <p><span class="status-indicator ${statusClass}"></span>${status}</p>
                `;
                comparison.appendChild(item);
            });
        }
        
        // è¨±å®¹é›»æµè¨ˆç®—
        const allowableCurrentData = {
            'vvf': {
                '1.6': { air: 19, conduit: 17, bundle: 15 },
                '2.0': { air: 27, conduit: 23, bundle: 19 },
                '2.6': { air: 36, conduit: 31, bundle: 26 },
                '5.5': { air: 58, conduit: 49, bundle: 42 },
                '8': { air: 75, conduit: 63, bundle: 54 },
                '14': { air: 107, conduit: 90, bundle: 77 },
                '22': { air: 139, conduit: 117, bundle: 100 },
                '38': { air: 183, conduit: 154, bundle: 132 }
            },
            'iv': {
                '1.6': { air: 27, conduit: 19, bundle: 17 },
                '2.0': { air: 35, conduit: 25, bundle: 22 },
                '2.6': { air: 48, conduit: 34, bundle: 30 },
                '5.5': { air: 76, conduit: 54, bundle: 48 },
                '8': { air: 99, conduit: 70, bundle: 62 },
                '14': { air: 139, conduit: 99, bundle: 88 },
                '22': { air: 183, conduit: 130, bundle: 115 },
                '38': { air: 257, conduit: 183, bundle: 162 }
            },
            'cv': {
                '2.0': { air: 42, conduit: 31, bundle: 27 },
                '5.5': { air: 86, conduit: 64, bundle: 56 },
                '8': { air: 110, conduit: 82, bundle: 72 },
                '14': { air: 155, conduit: 115, bundle: 101 },
                '22': { air: 205, conduit: 152, bundle: 134 },
                '38': { air: 280, conduit: 208, bundle: 183 }
            },
            'cvt': {
                '2.0': { air: 52, conduit: 37, bundle: 33 },
                '5.5': { air: 105, conduit: 75, bundle: 66 },
                '8': { air: 135, conduit: 96, bundle: 85 },
                '14': { air: 190, conduit: 135, bundle: 120 },
                '22': { air: 250, conduit: 180, bundle: 160 },
                '38': { air: 345, conduit: 245, bundle: 220 }
            }
        };
        
        function updateAllowableCurrent() {
            const cableType = document.getElementById('cable-type').value;
            const size = document.getElementById('cable-size-ac').value;
            const installation = document.getElementById('installation-type').value;
            const temp = parseFloat(document.getElementById('ambient-temp').value);
            const actualCurrent = parseFloat(document.getElementById('actual-current').value);
            
            // å€¤ã®æ›´æ–°
            document.getElementById('ambient-temp-value').textContent = temp + 'Â°C';
            document.getElementById('actual-current-value').textContent = actualCurrent + 'A';
            
            // åŸºæº–è¨±å®¹é›»æµå–å¾—
            let baseCurrent;
            if (allowableCurrentData[cableType] && allowableCurrentData[cableType][size]) {
                const data = allowableCurrentData[cableType][size];
                switch(installation) {
                    case 'air': baseCurrent = data.air; break;
                    case 'conduit': baseCurrent = data.conduit; break;
                    case 'bundle': baseCurrent = data.bundle; break;
                    case 'buried': baseCurrent = data.air * 1.4; break; // åœ°ä¸­ã¯æ°—ä¸­ã®1.4å€ç¨‹åº¦
                }
            } else {
                baseCurrent = 30; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
            }
            
            // æ¸©åº¦è£œæ­£
            let tempCorrection = 1.0;
            if (temp > 30) {
                tempCorrection = 1.0 - (temp - 30) * 0.015; // 1â„ƒä¸Šæ˜‡ã§1.5%æ¸›
            } else if (temp < 30) {
                tempCorrection = 1.0 + (30 - temp) * 0.01; // 1â„ƒä½ä¸‹ã§1%å¢—
            }
            
            const allowableCurrent = baseCurrent * tempCorrection;
            const usagePercent = actualCurrent / allowableCurrent * 100;
            
            // çµæœè¡¨ç¤º
            document.getElementById('allowable-current').textContent = allowableCurrent.toFixed(0) + ' A';
            document.getElementById('allowable-current-value').textContent = allowableCurrent.toFixed(0) + 'A';
            document.getElementById('used-current-value').textContent = actualCurrent + 'A';
            document.getElementById('usage-percent').textContent = usagePercent.toFixed(1) + ' %';
            document.getElementById('current-percent').textContent = usagePercent.toFixed(0) + '%';
            
            // ã‚²ãƒ¼ã‚¸æ›´æ–°
            const gaugeFill = document.getElementById('gauge-fill');
            const dashLength = 471; // åŠå††ã®é•·ã•
            const fillLength = dashLength * Math.min(usagePercent / 100, 1);
            gaugeFill.setAttribute('stroke-dasharray', `${fillLength} ${dashLength}`);
            
            // åˆ¤å®š
            const statusElement = document.getElementById('current-status');
            if (usagePercent <= 80) {
                statusElement.innerHTML = '<span class="status-indicator status-good"></span>å®‰å…¨ã«ä½¿ç”¨ã§ãã¾ã™';
            } else if (usagePercent <= 100) {
                statusElement.innerHTML = '<span class="status-indicator status-warning"></span>ä½¿ç”¨ç‡ãŒé«˜ã„ã§ã™';
            } else {
                statusElement.innerHTML = '<span class="status-indicator status-danger"></span>è¨±å®¹é›»æµã‚’è¶…ãˆã¦ã„ã¾ã™ï¼';
            }
            
            // è¨±å®¹é›»æµè¡¨æ›´æ–°
            updateAllowableCurrentTable(cableType);
        }
        
        function updateAllowableCurrentTable(cableType) {
            const sizes = ['1.6', '2.0', '2.6', '5.5', '8', '14', '22', '38'];
            const tbody = document.getElementById('allowable-current-table');
            tbody.innerHTML = '';
            
            sizes.forEach(size => {
                if (allowableCurrentData[cableType] && allowableCurrentData[cableType][size]) {
                    const data = allowableCurrentData[cableType][size];
                    const row = tbody.insertRow();
                    row.innerHTML = `
                        <td style="padding: 0.5rem; border: 1px solid #e0e0e0;">${size}</td>
                        <td style="padding: 0.5rem; border: 1px solid #e0e0e0; text-align: center;">${data.air}A</td>
                        <td style="padding: 0.5rem; border: 1px solid #e0e0e0; text-align: center;">${data.conduit}A</td>
                        <td style="padding: 0.5rem; border: 1px solid #e0e0e0; text-align: center;">${data.bundle}A</td>
                    `;
                }
            });
        }
        
        // é…é›»æ–¹å¼æ¯”è¼ƒ
        function compareDistribution() {
            const type = document.getElementById('compare-distribution').value;
            const voltage = parseFloat(document.getElementById('compare-voltage').value);
            const current = parseFloat(document.getElementById('compare-current').value);
            
            document.getElementById('compare-voltage-value').textContent = voltage + 'V';
            document.getElementById('compare-current-value').textContent = current + 'A';
            
            const resultDiv = document.getElementById('distribution-comparison-result');
            
            if (type === 'all') {
                // å…¨æ–¹å¼ã®æ¯”è¼ƒ
                const single2Power = voltage * current / 1000;
                const single3Power = voltage * current / 1000;
                const three3Power = Math.sqrt(3) * voltage * current / 1000;
                
                resultDiv.innerHTML = `
                    <div class="comparison-container" style="margin-top: 1rem;">
                        <div style="background: #E8F5E9; padding: 1rem; border-radius: 8px; margin: 0.5rem 0;">
                            <h5>ğŸ  å˜ç›¸2ç·šå¼</h5>
                            <p><strong>${single2Power.toFixed(1)} kW</strong></p>
                            <p style="font-size: 0.9rem;">åŸºæº–å€¤ï¼ˆ100%ï¼‰</p>
                        </div>
                        <div style="background: #E3F2FD; padding: 1rem; border-radius: 8px; margin: 0.5rem 0;">
                            <h5>ğŸ˜ï¸ å˜ç›¸3ç·šå¼</h5>
                            <p><strong>${single3Power.toFixed(1)} kW</strong> (ç‰‡å´)</p>
                            <p style="font-size: 0.9rem;">ä¸¡å´åˆè¨ˆ: ${(single3Power * 2).toFixed(1)} kW</p>
                            <p style="color: #1976D2;">åŠ¹ç‡: é›»ç·š3æœ¬ã§2å›è·¯åˆ†</p>
                        </div>
                        <div style="background: #FFF3E0; padding: 1rem; border-radius: 8px; margin: 0.5rem 0;">
                            <h5>ğŸ­ ä¸‰ç›¸3ç·šå¼</h5>
                            <p><strong>${three3Power.toFixed(1)} kW</strong></p>
                            <p style="font-size: 0.9rem;">å˜ç›¸æ¯”: ${((three3Power / single2Power) * 100).toFixed(0)}%</p>
                            <p style="color: #F57C00;">âˆš3å€ï¼ˆç´„1.73å€ï¼‰ã®é›»åŠ›</p>
                        </div>
                    </div>
                `;
            } else {
                // å€‹åˆ¥ã®æ–¹å¼
                let power, formula;
                switch(type) {
                    case 'single2':
                        power = voltage * current;
                        formula = `P = V Ã— I = ${voltage} Ã— ${current} = ${(power/1000).toFixed(1)} kW`;
                        break;
                    case 'single3':
                        power = voltage * current;
                        formula = `P = V Ã— I = ${voltage} Ã— ${current} = ${(power/1000).toFixed(1)} kW (ç‰‡å´)`;
                        break;
                    case 'three3':
                        power = Math.sqrt(3) * voltage * current;
                        formula = `P = âˆš3 Ã— V Ã— I = 1.732 Ã— ${voltage} Ã— ${current} = ${(power/1000).toFixed(1)} kW`;
                        break;
                }
                
                resultDiv.innerHTML = `
                    <div class="formula">${formula}</div>
                    <p><strong>é€é›»å¯èƒ½é›»åŠ›:</strong> <span class="result-value">${(power/1000).toFixed(1)} kW</span></p>
                    ${type === 'single3' ? '<p><small>â€»å˜ç›¸3ç·šå¼ã¯100V/200Vä¸¡æ–¹ã®è² è·ã«å¯¾å¿œå¯èƒ½</small></p>' : ''}
                    ${type === 'three3' ? '<p><small>â€»ä¸‰ç›¸3ç·šå¼ã¯åŒã˜é›»æµã§ã‚ˆã‚Šå¤§ããªé›»åŠ›ã‚’é€é›»å¯èƒ½</small></p>' : ''}
                `;
            }
        }
        
        // é…é›»æ–¹å¼è¨ˆç®—ã‚¿ã‚¤ãƒ—ã®åˆ‡ã‚Šæ›¿ãˆ
        function updateDistributionCalc() {
            const calcType = document.getElementById('calc-type').value;
            const sections = ['power-calc', 'current-calc', 'efficiency-calc', 'cost-calc'];
            
            sections.forEach(section => {
                document.getElementById(section).style.display = 'none';
            });
            
            document.getElementById(calcType + '-calc').style.display = 'block';
            
            // åˆæœŸè¨ˆç®—å®Ÿè¡Œ
            switch(calcType) {
                case 'power': compareDistribution(); break;
                case 'current': calculateRequiredCurrent(); break;
                case 'efficiency': calculateEfficiency(); break;
                case 'cost': calculateCost(); break;
            }
        }
        
        // å¿…è¦é›»æµã®è¨ˆç®—
        function calculateRequiredCurrent() {
            const power = parseFloat(document.getElementById('required-power').value) * 1000; // kW to W
            document.getElementById('required-power-value').textContent = (power/1000) + 'kW';
            
            const voltage = 200; // æ¨™æº–é›»åœ§
            
            const single2Current = power / voltage;
            const single3Current = power / voltage;
            const three3Current = power / (Math.sqrt(3) * voltage);
            
            const resultDiv = document.getElementById('required-current-result');
            resultDiv.innerHTML = `
                <div class="comparison-container" style="margin-top: 1rem;">
                    <div style="background: #E8F5E9; padding: 1rem; border-radius: 8px; margin: 0.5rem 0;">
                        <h5>å˜ç›¸2ç·šå¼ï¼ˆ${voltage}Vï¼‰</h5>
                        <p><strong>${single2Current.toFixed(1)} A</strong></p>
                        <p style="font-size: 0.9rem;">å¿…è¦é›»ç·š: 2.0mmÂ² (è¨±å®¹27A) â†’ ${single2Current > 27 ? 'âŒ ä¸è¶³' : 'âœ… OK'}</p>
                    </div>
                    <div style="background: #E3F2FD; padding: 1rem; border-radius: 8px; margin: 0.5rem 0;">
                        <h5>å˜ç›¸3ç·šå¼ï¼ˆ${voltage}Vï¼‰</h5>
                        <p><strong>${single3Current.toFixed(1)} A</strong></p>
                        <p style="font-size: 0.9rem;">å„ç›¸ã«åˆ†æ•£å¯èƒ½: ${(single3Current/2).toFixed(1)} A</p>
                    </div>
                    <div style="background: #FFF3E0; padding: 1rem; border-radius: 8px; margin: 0.5rem 0;">
                        <h5>ä¸‰ç›¸3ç·šå¼ï¼ˆ${voltage}Vï¼‰</h5>
                        <p><strong>${three3Current.toFixed(1)} A</strong></p>
                        <p style="font-size: 0.9rem;">å˜ç›¸ã®${((three3Current/single2Current)*100).toFixed(0)}%ã§æ¸ˆã‚€</p>
                    </div>
                </div>
            `;
        }
        
        // é€é›»åŠ¹ç‡ã®è¨ˆç®—
        function calculateEfficiency() {
            const distance = parseFloat(document.getElementById('transmission-distance').value);
            const power = parseFloat(document.getElementById('transmission-power').value) * 1000;
            
            document.getElementById('transmission-distance-value').textContent = distance + 'm';
            document.getElementById('transmission-power-value').textContent = (power/1000) + 'kW';
            
            const voltage = 200;
            const cableSize = 5.5; // mmÂ²
            
            // é›»åœ§é™ä¸‹è¨ˆç®—
            const single2Drop = 35.6 * distance * (power/voltage) / (1000 * cableSize);
            const single3Drop = 17.8 * distance * (power/voltage) / (1000 * cableSize);
            const three3Drop = 30.8 * distance * (power/(Math.sqrt(3)*voltage)) / (1000 * cableSize);
            
            // æå¤±é›»åŠ›è¨ˆç®—
            const single2Loss = single2Drop * (power/voltage) / 1000;
            const single3Loss = single3Drop * (power/voltage) / 1000;
            const three3Loss = three3Drop * (power/(Math.sqrt(3)*voltage)) / 1000;
            
            const resultDiv = document.getElementById('efficiency-result');
            resultDiv.innerHTML = `
                <div class="comparison-container" style="margin-top: 1rem;">
                    <div style="background: #FFEBEE; padding: 1rem; border-radius: 8px; margin: 0.5rem 0;">
                        <h5>å˜ç›¸2ç·šå¼</h5>
                        <p>é›»åœ§é™ä¸‹: <strong>${single2Drop.toFixed(1)}V (${(single2Drop/voltage*100).toFixed(1)}%)</strong></p>
                        <p>æå¤±é›»åŠ›: <strong>${single2Loss.toFixed(2)}kW</strong></p>
                        <p>åŠ¹ç‡: ${(100 - single2Loss/power*100000).toFixed(1)}%</p>
                    </div>
                    <div style="background: #E3F2FD; padding: 1rem; border-radius: 8px; margin: 0.5rem 0;">
                        <h5>å˜ç›¸3ç·šå¼</h5>
                        <p>é›»åœ§é™ä¸‹: <strong>${single3Drop.toFixed(1)}V (${(single3Drop/voltage*100).toFixed(1)}%)</strong></p>
                        <p>æå¤±é›»åŠ›: <strong>${single3Loss.toFixed(2)}kW</strong></p>
                        <p>åŠ¹ç‡: ${(100 - single3Loss/power*100000).toFixed(1)}%</p>
                    </div>
                    <div style="background: #E8F5E9; padding: 1rem; border-radius: 8px; margin: 0.5rem 0;">
                        <h5>ä¸‰ç›¸3ç·šå¼ âœ¨æœ€é«˜åŠ¹ç‡</h5>
                        <p>é›»åœ§é™ä¸‹: <strong>${three3Drop.toFixed(1)}V (${(three3Drop/voltage*100).toFixed(1)}%)</strong></p>
                        <p>æå¤±é›»åŠ›: <strong>${three3Loss.toFixed(2)}kW</strong></p>
                        <p>åŠ¹ç‡: ${(100 - three3Loss/power*100000).toFixed(1)}%</p>
                    </div>
                </div>
            `;
        }
        
        // é›»æ°—æ–™é‡‘ã®è¨ˆç®—
        function calculateCost() {
            const usage = parseFloat(document.getElementById('monthly-usage').value);
            const contract = parseFloat(document.getElementById('contract-power').value);
            
            document.getElementById('monthly-usage-value').textContent = usage + 'kWh';
            document.getElementById('contract-power-value').textContent = contract + 'kW';
            
            // æ–™é‡‘å˜ä¾¡ï¼ˆä»®å®šï¼‰
            const basicRate = 286; // å††/kWï¼ˆåŸºæœ¬æ–™é‡‘ï¼‰
            const usageRate = 25; // å††/kWhï¼ˆå¾“é‡æ–™é‡‘ï¼‰
            const powerBasicRate = 1100; // å††/kWï¼ˆå‹•åŠ›åŸºæœ¬æ–™é‡‘ï¼‰
            const powerUsageRate = 17; // å††/kWhï¼ˆå‹•åŠ›å¾“é‡æ–™é‡‘ï¼‰
            
            // å˜ç›¸å¥‘ç´„ã®æ–™é‡‘
            const singleBasic = contract * basicRate;
            const singleUsage = usage * usageRate;
            const singleTotal = singleBasic + singleUsage;
            
            // ä¸‰ç›¸ï¼ˆå‹•åŠ›ï¼‰å¥‘ç´„ã®æ–™é‡‘
            const threeBasic = contract * powerBasicRate;
            const threeUsage = usage * powerUsageRate;
            const threeTotal = threeBasic + threeUsage;
            
            const resultDiv = document.getElementById('cost-result');
            resultDiv.innerHTML = `
                <div class="comparison-container" style="margin-top: 1rem;">
                    <div style="background: #E3F2FD; padding: 1rem; border-radius: 8px; margin: 0.5rem 0;">
                        <h5>ğŸ“Š å¾“é‡é›»ç¯å¥‘ç´„ï¼ˆå˜ç›¸ï¼‰</h5>
                        <p>åŸºæœ¬æ–™é‡‘: ${singleBasic.toLocaleString()}å††</p>
                        <p>å¾“é‡æ–™é‡‘: ${singleUsage.toLocaleString()}å††</p>
                        <p><strong>åˆè¨ˆ: ${singleTotal.toLocaleString()}å††/æœˆ</strong></p>
                    </div>
                    <div style="background: #FFF3E0; padding: 1rem; border-radius: 8px; margin: 0.5rem 0;">
                        <h5>âš¡ å‹•åŠ›å¥‘ç´„ï¼ˆä¸‰ç›¸ï¼‰</h5>
                        <p>åŸºæœ¬æ–™é‡‘: ${threeBasic.toLocaleString()}å††</p>
                        <p>å¾“é‡æ–™é‡‘: ${threeUsage.toLocaleString()}å††</p>
                        <p><strong>åˆè¨ˆ: ${threeTotal.toLocaleString()}å††/æœˆ</strong></p>
                        <p style="color: ${threeTotal < singleTotal ? '#4CAF50' : '#F44336'};">
                            å·®é¡: ${Math.abs(threeTotal - singleTotal).toLocaleString()}å††
                            ${threeTotal < singleTotal ? 'ï¼ˆãŠå¾—ï¼‰' : 'ï¼ˆå‰²é«˜ï¼‰'}
                        </p>
                    </div>
                </div>
                <div class="alert alert-info" style="margin-top: 1rem;">
                    <p>ğŸ’¡ <strong>ãƒã‚¤ãƒ³ãƒˆ:</strong> å‹•åŠ›å¥‘ç´„ã¯åŸºæœ¬æ–™é‡‘ãŒé«˜ã„ã§ã™ãŒã€ä½¿ç”¨é‡ãŒå¤šã„å ´åˆã¯å¾“é‡æ–™é‡‘ãŒå®‰ã„ãŸã‚æœ‰åˆ©ã«ãªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚æœˆ300kWhä»¥ä¸Šä½¿ç”¨ã™ã‚‹å·¥å ´ãªã©ã§ã¯æ¤œè¨ã®ä¾¡å€¤ãŒã‚ã‚Šã¾ã™ã€‚</p>
                </div>
            `;
        }
        
        // åˆæœŸåŒ–
        window.onload = function() {
            updatePowerFactor();
            calculateCapacitor();
            updateVoltageDrop();
            updateAllowableCurrent();
            compareDistribution();
            updateDistributionCalc();
            
            // ã‚²ãƒ¼ã‚¸ã®ç›®ç››ã‚Šç”Ÿæˆ
            const gaugeTicks = document.getElementById('gauge-ticks');
            for (let i = 0; i <= 100; i += 20) {
                const angle = -180 + (i * 1.8);
                const rad = angle * Math.PI / 180;
                const x1 = 300 + 130 * Math.cos(rad);
                const y1 = 250 + 130 * Math.sin(rad);
                const x2 = 300 + 140 * Math.cos(rad);
                const y2 = 250 + 140 * Math.sin(rad);
                
                const tick = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                tick.setAttribute('x1', x1);
                tick.setAttribute('y1', y1);
                tick.setAttribute('x2', x2);
                tick.setAttribute('y2', y2);
                tick.setAttribute('stroke', '#666');
                tick.setAttribute('stroke-width', '2');
                gaugeTicks.appendChild(tick);
                
                const label = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                label.setAttribute('x', 300 + 160 * Math.cos(rad));
                label.setAttribute('y', 250 + 160 * Math.sin(rad) + 5);
                label.setAttribute('text-anchor', 'middle');
                label.setAttribute('font-size', '12');
                label.textContent = i + '%';
                gaugeTicks.appendChild(label);
            }
        };
    </script>
</body>
</html>